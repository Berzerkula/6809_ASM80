0000                             ; OMEN KILO monitor version 2.0
0000                             ; (C) 2018 Martin Maly <maly@maly.cz>
0000                             ; Published under the terms of MIT license
0000                             ; 
0000                             ; Commands:
0000                             ; =========
0000                             ; M - list / change memory
0000                             ; D - Dump memory
0000                             ;   Enter moves to the next cell, backspace moves to the previous, space ends
0000                             ; G - Jump to memory
0000                             ; U - List and call user modules
0000                             ; W - Dump memory (from, to) as a SREC19 record
0000                             ; X - Dump memory (from, to) as a HEX record
0000                             ; : - read a HEX line (you can send the HEX record directly into the terminal)
0000                             ; S - read a SREC line (not yet implemented)
0000                             ; 
0000                          .ENGINE   kilo   
0000                          .PRAGMA   srec   
0000                             ; 
0000                             ;zero page
0000                          .BSSEG      
0000                          .ORG   0   
0000                Q_ADD:    DS   2   ; address
0002                Q_KEY:    DS   1   ; last key pressed
0003                Q_HEXCNT:   DS   1   ; for hex/srec: number of bytes
0004                Q_HEXADD:   DS   2   ; for hex/srec: address
0006                Q_HEXADD2:   DS   2   
0008                Q_SUBR:   DS   2   
000A                             ; 
0000                          .CSEG      
0000                             ; 
0000                             ; for generating EEPROM image, use this:
0000                          .ORG   $0000   
0000                          .PHASE   $E000   
E000 @0000                       ;            .ORG    $E000 
E000 @0000                       ;            .ENT    $ 
E000 @0000                       ; 
E000 @0000                       ; serial
E000 @0000          ACIA:     EQU   $83fe   
E000 @0000          ACIAC:    EQU   ACIA   
E000 @0000          ACIAS:    EQU   ACIA   
E000 @0000          ACIAD:    EQU   ACIA+1   
E000 @0000          ACIA_TDRE:   EQU   02h   
E000 @0000          ACIA_RDRF:   EQU   01h   
E000 @0000                       ; 
E000 @0000                       ; pia
E000 @0000          PIA:      EQU   $9000   
E000 @0000                       ;Common PIA addresses - using the highest possible
E000 @0000          PORTA:    EQU   PIA+$3fc   
E000 @0000          DDRA:     EQU   PORTA   
E000 @0000          CRA:      EQU   PIA+$3fd   
E000 @0000          PORTB:    EQU   PIA+$3fe   
E000 @0000          DDRB:     EQU   PORTB   
E000 @0000          CRB:      EQU   PIA+$3ff   
E000 @0000                       ; 
E000 @0000                       ; Vector table
E000 @0000                       ; E000 - reset
E000 @0000                       ; E003 - read a character from the serial port
E000 @0000                       ; E006 - print a character
E000 @0000                       ; E009 - print 2digit hex number from A
E000 @0000                       ; E00C - print 4digit hex number from X
E000 @0000                       ; E00F - print immediatelly stored ASCIIZ string
E000 @0000          MRESET:   EQU   $E000   
E000 @0000          MSERIN:   EQU   $E003   
E000 @0000          MSEROUT:   EQU   $E006   
E000 @0000          MPRINT2:   EQU   $E009   
E000 @0000          MPRINTX:   EQU   $E00C   
E000 @0000          MPRIMM:   EQU   $E00F   
E000 @0000                       ; 
E000 @0000   7E E0 12         JMP   reset   
E003 @0003   7E E3 C3         JMP   serin   
E006 @0006   7E E3 8F         JMP   serout   
E009 @0009   7E E2 F3         JMP   print2   
E00C @000C   7E E2 EC         JMP   printx   
E00F @000F   7E E3 B2         JMP   primm   
E012 @0012          RESET:       
E012 @0012   10 CE 80 00      LDS   #$8000   
E016 @0016   1A 50            ORCC   #$50   
E018 @0018   86 03            LDA   #$03   
E01A @001A                       ; 
E01A @001A                       ; serial
E01A @001A   B7 83 FE         STA   ACIAC   
E01D @001D   86 15            LDA   #$15   
E01F @001F   B7 83 FE         STA   ACIAC   
E022 @0022                       ; 
E022 @0022                       ; pia
E022 @0022   86 00            LDA   #$00   ; no interrupts, access DDR
E024 @0024   B7 93 FD         STA   CRA   
E027 @0027   B7 93 FF         STA   CRB   
E02A @002A   86 FF            LDA   #$FF   ; all outputs
E02C @002C   B7 93 FC         STA   DDRA   
E02F @002F   B7 93 FE         STA   DDRB   
E032 @0032   86 04            LDA   #$04   ; access PORT
E034 @0034   B7 93 FD         STA   CRA   
E037 @0037   B7 93 FF         STA   CRB   
E03A @003A                       ; 
E03A @003A   86 00            LDA   #0   
E03C @003C   1F 8B            TFR   a,dp   
E03E @003E                       ; 
E03E @003E                       ; 
E03E @003E          WARM:        
E03E @003E   BD E3 B2         JSR   primm   
E041 @0041   4B 49 4C 4F 20 4D 6F 6E 69 74 6F 72 20 76 32 00 .CSTR   "KILO Monitor v2"   
E051 @0051          MAINCRLF:      
E051 @0051   BD E3 9E         JSR   pcrlf   
E054 @0054          MAIN:        
E054 @0054   BD E3 A8         JSR   prompt   
E057 @0057          MAINSHORT:      
E057 @0057   BD E3 C3         JSR   serin   
E05A @005A   81 3A            CMPA   #":"   
E05C @005C   27 3A            BEQ   m_hex   
E05E @005E   81 0D            CMPA   #$0d   
E060 @0060   27 F5            BEQ   mainshort   
E062 @0062   81 0A            CMPA   #$a   
E064 @0064   27 F1            BEQ   mainshort   
E066 @0066                       ; 
E066 @0066                       ;caps fix
E066 @0066   84 DF            ANDA   #$DF   
E068 @0068   81 4D            CMPA   #"M"   
E06A @006A   10 27 00 5C      LBEQ   m_mem   
E06E @006E   81 44            CMPA   #"D"   
E070 @0070   10 27 00 95      LBEQ   m_dump   
E074 @0074   81 47            CMPA   #"G"   
E076 @0076   10 27 00 C9      LBEQ   m_go   
E07A @007A   81 55            CMPA   #"U"   
E07C @007C   10 27 00 E1      LBEQ   m_user   
E080 @0080   81 57            CMPA   #"W"   
E082 @0082   10 27 01 98      LBEQ   m_writesrec   
E086 @0086   81 58            CMPA   #"X"   
E088 @0088   10 27 01 76      LBEQ   m_writehex   
E08C @008C                       ; 
E08C @008C          WHAT:        
E08C @008C   BD E3 B2         JSR   primm   
E08F @008F   57 68 61 74 3F 00 .CSTR   "What?"   
E095 @0095   7E E0 51         JMP   maincrlf   
E098 @0098                       ; 
E098 @0098          M_HEX:       
E098 @0098   BD E3 3F         JSR   gethex2   
E09B @009B   97 03            STA   q_hexcnt   
E09D @009D   BD E3 4E         JSR   gethex4   
E0A0 @00A0   9F 04            STX   q_hexadd   
E0A2 @00A2   BD E3 3F         JSR   gethex2   
E0A5 @00A5   81 00            CMPA   #$00   
E0A7 @00A7   26 1F            BNE   m_hexend   
E0A9 @00A9          M_HEX_LOOP:      
E0A9 @00A9   BD E3 3F         JSR   gethex2   
E0AC @00AC   A7 80            STA   ,x+   
E0AE @00AE                       ;inc q_hexadd
E0AE @00AE   0A 03            DEC   q_hexcnt   
E0B0 @00B0   26 F7            BNE   m_hex_loop   
E0B2 @00B2   86 2A            LDA   #"*"   
E0B4 @00B4   BD E3 8F         JSR   serout   
E0B7 @00B7          M_HEX_WAITEND:      
E0B7 @00B7   BD E3 C3         JSR   serin   
E0BA @00BA   81 0D            CMPA   #$0d   
E0BC @00BC   27 96            BEQ   main   
E0BE @00BE   81 0A            CMPA   #$0a   
E0C0 @00C0   27 F5            BEQ   m_hex_waitend   
E0C2 @00C2   81 3A            CMPA   #":"   
E0C4 @00C4   27 D2            BEQ   m_hex   
E0C6 @00C6   20 EF            BRA   m_hex_waitend   
E0C8 @00C8          M_HEXEND:      
E0C8 @00C8                       ;jsr gethex2
E0C8 @00C8   20 87            BRA   maincrlf   
E0CA @00CA                       ; 
E0CA @00CA                       ; 
E0CA @00CA          M_MEM:       
E0CA @00CA   BD E3 0E         JSR   getaddr   
E0CD @00CD   9E 00            LDX   q_add   
E0CF @00CF          M_MEM_LINE:      
E0CF @00CF   BD E3 9E         JSR   pcrlf   
E0D2 @00D2   BD E2 EC         JSR   printx   
E0D5 @00D5   BD E3 B2         JSR   primm   
E0D8 @00D8   20 5B 00         .CSTR   " ["   
E0DB @00DB   A6 80            LDA   ,x+   
E0DD @00DD   97 01            STA   q_add+1   
E0DF @00DF   BD E2 F3         JSR   print2   
E0E2 @00E2   BD E3 B2         JSR   primm   
E0E5 @00E5   5D 20 00         .CSTR   "] "   
E0E8 @00E8   BD E3 1C         JSR   get4x   
E0EB @00EB   81 A0            CMPA   #$A0   
E0ED @00ED   10 27 FF 60      LBEQ   maincrlf   
E0F1 @00F1   81 88            CMPA   #$88   
E0F3 @00F3   27 0B            BEQ   m_mem_back   
E0F5 @00F5   81 8D            CMPA   #$8d   
E0F7 @00F7   26 D6            BNE   m_mem_line   
E0F9 @00F9   96 01            LDA   q_add+1   
E0FB @00FB   A7 1F            STA   [-1,x]   
E0FD @00FD   7E E0 CF         JMP   m_mem_line   
E100 @0100          M_MEM_BACK:      
E100 @0100   96 01            LDA   q_add+1   
E102 @0102   A7 1F            STA   [-1,x]   
E104 @0104   30 1E            LEAX   -2,x   
E106 @0106   7E E0 CF         JMP   m_mem_line   
E109 @0109                       ; 
E109 @0109                       ; 
E109 @0109          M_DUMP:      
E109 @0109   BD E3 0E         JSR   getaddr   
E10C @010C   9E 00            LDX   q_add   
E10E @010E   BD E3 9E         JSR   pcrlf   
E111 @0111          M_DUMP_LINE:      
E111 @0111   BD E2 EC         JSR   printx   
E114 @0114   BD E3 B2         JSR   primm   
E117 @0117   3A 20 00         .CSTR   ": "   
E11A @011A   C6 10            LDB   #$10   
E11C @011C          M_DUMP_LOOP:      
E11C @011C   A6 80            LDA   ,x+   
E11E @011E   BD E2 F3         JSR   print2   
E121 @0121   86 20            LDA   #$20   
E123 @0123   BD E3 8F         JSR   serout   
E126 @0126   5A               DECB      
E127 @0127   26 F3            BNE   m_dump_loop   
E129 @0129   BD E3 9E         JSR   pcrlf   
E12C @012C          M_DUMP_WAIT:      
E12C @012C   BD E3 C3         JSR   serin   
E12F @012F   81 0D            CMPA   #$0d   
E131 @0131   27 DE            BEQ   m_dump_line   
E133 @0133   81 20            CMPA   #$20   
E135 @0135   10 27 FF 1B      LBEQ   main   
E139 @0139   81 08            CMPA   #$08   
E13B @013B   26 EF            BNE   m_dump_wait   
E13D @013D   30 88 E0         LEAX   -32,x   
E140 @0140   7E E1 11         JMP   m_dump_line   
E143 @0143                       ; 
E143 @0143          M_GO:        
E143 @0143   BD E3 0E         JSR   getaddr   
E146 @0146   6E 9F 00 00      JMP   [q_add]   
E14A @014A                       ; 
E14A @014A          M_U_FNEXT:      
E14A @014A   A6 03            LDA   3,x   
E14C @014C   81 4D            CMPA   #"M"   
E14E @014E   26 10            BNE   m_u_fnext_e   
E150 @0150   A6 04            LDA   4,x   
E152 @0152   81 4F            CMPA   #"O"   
E154 @0154   26 0A            BNE   m_u_fnext_e   
E156 @0156   A6 05            LDA   5,x   
E158 @0158   81 44            CMPA   #"D"   
E15A @015A   26 04            BNE   m_u_fnext_e   
E15C @015C   A6 06            LDA   6,x   
E15E @015E   81 39            CMPA   #"9"   
E160 @0160          M_U_FNEXT_E:      
E160 @0160   39               RTS      
E161 @0161                       ; 
E161 @0161          M_USER:      
E161 @0161   BD E3 B2         JSR   primm   
E164 @0164   49 6E 73 74 61 6C 6C 65 64 20 6D 6F 64 75 6C 65 73 3A 0D 0A 00 .CSTR   "Installed modules:",$d,$a   
E179 @0179   CC E3 CE         LDD   #mon_end   
E17C @017C   5F               CLRB      
E17D @017D   4C               INCA      
E17E @017E   34 06            PSHS   d   
E180 @0180   35 10            PULS   x   
E182 @0182   C6 41            LDB   #$41   
E184 @0184          M_U_FIND:      
E184 @0184   BD E1 4A         JSR   m_u_fnext   
E187 @0187   26 21            BNE   m_u_next   
E189 @0189                       ;found
E189 @0189   86 5B            LDA   #"["   
E18B @018B   BD E3 8F         JSR   serout   
E18E @018E   1F 98            TFR   b,a   
E190 @0190   BD E3 8F         JSR   serout   
E193 @0193   5C               INCB      
E194 @0194   86 5D            LDA   #"]"   
E196 @0196   BD E3 8F         JSR   serout   
E199 @0199   86 20            LDA   #" "   
E19B @019B   BD E3 8F         JSR   serout   
E19E @019E   34 10            PSHS   x   
E1A0 @01A0   30 07            LEAX   7,x   
E1A2 @01A2   BD E3 84         JSR   strout   
E1A5 @01A5   BD E3 9E         JSR   pcrlf   
E1A8 @01A8   35 10            PULS   x   
E1AA @01AA          M_U_NEXT:      
E1AA @01AA   30 89 01 00      LEAX   256,x   
E1AE @01AE   26 D4            BNE   m_u_find   
E1B0 @01B0                       ; 
E1B0 @01B0   BD E3 B2         JSR   primm   
E1B3 @01B3   53 65 6C 65 63 74 20 6D 6F 64 75 6C 65 20 74 6F 20 72 75 6E 3A 20 00 .CSTR   "Select module to run: "   
E1CA @01CA                       ; 
E1CA @01CA          M_U_SEL:      
E1CA @01CA   BD E3 C3         JSR   serin   
E1CD @01CD   81 20            CMPA   #$20   
E1CF @01CF   10 27 FE 81      LBEQ   main   
E1D3 @01D3   81 0D            CMPA   #$0d   
E1D5 @01D5   10 27 FE 7B      LBEQ   main   
E1D9 @01D9   80 41            SUBA   #$41   
E1DB @01DB   10 2D FE 75      LBLT   main   
E1DF @01DF                       ; 
E1DF @01DF   34 02            PSHS   a   
E1E1 @01E1   CC E3 CE         LDD   #mon_end   
E1E4 @01E4   5F               CLRB      
E1E5 @01E5   4C               INCA      
E1E6 @01E6   34 06            PSHS   d   
E1E8 @01E8   35 10            PULS   x   
E1EA @01EA   35 04            PULS   b   
E1EC @01EC          M_U_SELF:      
E1EC @01EC   BD E1 4A         JSR   m_u_fnext   
E1EF @01EF   26 05            BNE   m_u_seln   
E1F1 @01F1   C1 00            CMPB   #0   
E1F3 @01F3   27 0A            BEQ   m_u_found   
E1F5 @01F5   5A               DECB      
E1F6 @01F6          M_U_SELN:      
E1F6 @01F6   30 89 01 00      LEAX   256,x   
E1FA @01FA   26 F0            BNE   m_u_self   
E1FC @01FC   7E E1 CA         JMP   m_u_sel   
E1FF @01FF          M_U_FOUND:      
E1FF @01FF   34 10            PSHS   x   
E201 @0201   39               RTS      
E202 @0202                       ; 
E202 @0202                       ; 
E202 @0202          M_WRITEHEX:      
E202 @0202   8E E2 81         LDX   #m_whexline   
E205 @0205   9F 08            STX   q_subr   
E207 @0207   BD E2 39         JSR   m_wrbody   
E20A @020A                       ; 
E20A @020A   BD E3 B2         JSR   primm   
E20D @020D   3A 30 30 30 30 30 30 30 31 46 46 0D 0A 00 .CSTR   ":00000001FF",$d,$a   
E21B @021B   7E E0 54         JMP   main   
E21E @021E                       ; 
E21E @021E          M_WRITESREC:      
E21E @021E   8E E2 B2         LDX   #m_wsline   
E221 @0221   9F 08            STX   q_subr   
E223 @0223   BD E2 39         JSR   m_wrbody   
E226 @0226                       ; 
E226 @0226   BD E3 B2         JSR   primm   
E229 @0229   53 39 30 33 30 30 30 30 46 43 0D 0A 00 .CSTR   "S9030000FC",$d,$a   
E236 @0236   7E E0 54         JMP   main   
E239 @0239                       ; 
E239 @0239                       ; 
E239 @0239          M_WRBODY:      
E239 @0239   BD E3 B2         JSR   primm   
E23C @023C   46 72 6F 6D 3A 00 .CSTR   "From:"   
E242 @0242   BD E3 17         JSR   get4   
E245 @0245   9E 00            LDX   q_add   
E247 @0247   9F 04            STX   q_hexadd   
E249 @0249   BD E3 B2         JSR   primm   
E24C @024C   0D 0A 54 6F 3A 00 .CSTR   $d,$a,"To:"   
E252 @0252   BD E3 17         JSR   get4   
E255 @0255   9E 00            LDX   q_add   
E257 @0257   9F 06            STX   q_hexadd2   
E259 @0259   BD E3 9E         JSR   pcrlf   
E25C @025C          M_WHL:       
E25C @025C   96 04            LDA   q_hexadd   
E25E @025E   91 06            CMPA   q_hexadd2   
E260 @0260   26 0A            BNE   m_wh10   
E262 @0262   96 07            LDA   q_hexadd2+1   
E264 @0264   90 05            SUBA   q_hexadd+1   
E266 @0266   27 18            BEQ   m_whend   
E268 @0268   81 10            CMPA   #$10   
E26A @026A   25 02            BLO   m_whx   
E26C @026C          M_WH10:      
E26C @026C   86 10            LDA   #$10   
E26E @026E          M_WHX:       
E26E @026E   97 03            STA   q_hexcnt   
E270 @0270   AD 9F 00 08      JSR   [q_subr]   
E274 @0274   96 04            LDA   q_hexadd   
E276 @0276   91 06            CMPA   q_hexadd2   
E278 @0278   23 E2            BLS   m_whl   
E27A @027A   96 05            LDA   q_hexadd+1   
E27C @027C   91 07            CMPA   q_hexadd2+1   
E27E @027E   23 DC            BLS   m_whl   
E280 @0280          M_WHEND:      
E280 @0280   39               RTS      
E281 @0281                       ; 
E281 @0281          M_WHEXLINE:      
E281 @0281   86 3A            LDA   #":"   
E283 @0283   BD E3 8F         JSR   serout   
E286 @0286   96 03            LDA   q_hexcnt   
E288 @0288   BD E2 F3         JSR   print2   
E28B @028B   9E 04            LDX   q_hexadd   
E28D @028D   BD E2 EC         JSR   printx   
E290 @0290   86 00            LDA   #0   
E292 @0292   BD E2 F3         JSR   print2   
E295 @0295   D6 03            LDB   q_hexcnt   
E297 @0297   DB 04            ADDB   q_hexadd   
E299 @0299   DB 05            ADDB   q_hexadd+1   
E29B @029B                       ; 
E29B @029B          MWHLOOP:      
E29B @029B   EB 84            ADDB   ,x   
E29D @029D   A6 80            LDA   ,x+   
E29F @029F   BD E2 F3         JSR   print2   
E2A2 @02A2   0A 03            DEC   q_hexcnt   
E2A4 @02A4   26 F5            BNE   mwhloop   
E2A6 @02A6   9F 04            STX   q_hexadd   
E2A8 @02A8   1F 98            TFR   b,a   
E2AA @02AA   40               NEGA      
E2AB @02AB   BD E2 F3         JSR   print2   
E2AE @02AE   BD E3 9E         JSR   pcrlf   
E2B1 @02B1   39               RTS      
E2B2 @02B2                       ; 
E2B2 @02B2          M_WSLINE:      
E2B2 @02B2   86 53            LDA   #"S"   
E2B4 @02B4   BD E3 8F         JSR   serout   
E2B7 @02B7   86 31            LDA   #"1"   
E2B9 @02B9   BD E3 8F         JSR   serout   
E2BC @02BC   96 03            LDA   q_hexcnt   
E2BE @02BE   8B 03            ADDA   #3   
E2C0 @02C0   BD E2 F3         JSR   print2   
E2C3 @02C3   9E 04            LDX   q_hexadd   
E2C5 @02C5   BD E2 EC         JSR   printx   
E2C8 @02C8   86 00            LDA   #0   
E2CA @02CA   BD E2 F3         JSR   print2   
E2CD @02CD   D6 03            LDB   q_hexcnt   
E2CF @02CF   DB 04            ADDB   q_hexadd   
E2D1 @02D1   DB 05            ADDB   q_hexadd+1   
E2D3 @02D3   CB 03            ADDB   #3   
E2D5 @02D5          MWSLOOP:      
E2D5 @02D5   EB 84            ADDB   ,x   
E2D7 @02D7   A6 80            LDA   ,x+   
E2D9 @02D9   BD E2 F3         JSR   print2   
E2DC @02DC   0A 03            DEC   q_hexcnt   
E2DE @02DE   26 F5            BNE   mwsloop   
E2E0 @02E0   9F 04            STX   q_hexadd   
E2E2 @02E2   1F 98            TFR   b,a   
E2E4 @02E4   40               NEGA      
E2E5 @02E5   BD E2 F3         JSR   print2   
E2E8 @02E8   BD E3 9E         JSR   pcrlf   
E2EB @02EB   39               RTS      
E2EC @02EC                       ; 
E2EC @02EC                       ; 
E2EC @02EC                       ; ----------------------------------------
E2EC @02EC                       ; End of monitor commands
E2EC @02EC                       ; Here starts the useful routines
E2EC @02EC                       ; 
E2EC @02EC                       ; Print the 4digit hex number from the X register
E2EC @02EC          PRINTX:      
E2EC @02EC   1F 10            TFR   x,d   
E2EE @02EE   BD E2 F3         JSR   print2   
E2F1 @02F1   1F 98            TFR   b,a   
E2F3 @02F3                       ; 
E2F3 @02F3                       ; Print the 2digit hex number from the A register
E2F3 @02F3                       ; 
E2F3 @02F3          PRINT2:      
E2F3 @02F3   34 02            PSHS   a   
E2F5 @02F5   44               LSRA      
E2F6 @02F6   44               LSRA      
E2F7 @02F7   44               LSRA      
E2F8 @02F8   44               LSRA      
E2F9 @02F9   BD E3 00         JSR   printhex   
E2FC @02FC   35 02            PULS   a   
E2FE @02FE   84 0F            ANDA   #$0f   
E300 @0300                       ; Print one hex digit from register A
E300 @0300          PRINTHEX:      
E300 @0300   81 0A            CMPA   #$0a   
E302 @0302   24 05            BHS   ph2   
E304 @0304   8B 30            ADDA   #$30   
E306 @0306   7E E3 8F         JMP   serout   
E309 @0309          PH2:         
E309 @0309   8B 37            ADDA   #$37   
E30B @030B   7E E3 8F         JMP   serout   
E30E @030E                       ; 
E30E @030E                       ; Prompt for address
E30E @030E          GETADDR:      
E30E @030E   BD E3 B2         JSR   primm   
E311 @0311   41 64 64 72 3A 00 .CSTR   "Addr:"   
E317 @0317                       ;JSR     get4
E317 @0317                       ;RTS
E317 @0317                       ; 
E317 @0317                       ; Read 4digit hex address
E317 @0317                       ; The value is in q_add variable (ZP)
E317 @0317          GET4:        
E317 @0317   CC 00 00         LDD   #0   
E31A @031A   DD 00            STD   q_add   
E31C @031C          GET4X:       
E31C @031C   BD E3 5D         JSR   gethex   
E31F @031F   2A 01            BPL   get4ok   
E321 @0321   39               RTS      
E322 @0322          GET4OK:      
E322 @0322   1F 89            TFR   a,b   
E324 @0324   BD E3 00         JSR   printhex   
E327 @0327   4F               CLRA      
E328 @0328   08 01            LSL   q_add+1   
E32A @032A   09 00            ROL   q_add   
E32C @032C   08 01            LSL   q_add+1   
E32E @032E   09 00            ROL   q_add   
E330 @0330   08 01            LSL   q_add+1   
E332 @0332   09 00            ROL   q_add   
E334 @0334   08 01            LSL   q_add+1   
E336 @0336   09 00            ROL   q_add   
E338 @0338   D3 00            ADDD   q_add   
E33A @033A   DD 00            STD   q_add   
E33C @033C                       ; 
E33C @033C   7E E3 1C         JMP   get4x   
E33F @033F                       ; 
E33F @033F                       ; Get 1 byte from serial to A (for .hex/.srec)
E33F @033F                       ; 
E33F @033F          GETHEX2:      
E33F @033F   BD E3 5D         JSR   gethex   
E342 @0342   48               LSLA      
E343 @0343   48               LSLA      
E344 @0344   48               LSLA      
E345 @0345   48               LSLA      
E346 @0346   97 02            STA   q_key   
E348 @0348   BD E3 5D         JSR   gethex   
E34B @034B   9B 02            ADDA   q_key   
E34D @034D   39               RTS      
E34E @034E                       ; 
E34E @034E                       ; Get 2 bytes from serial to X (for .hex/.srec)
E34E @034E                       ; 
E34E @034E          GETHEX4:      
E34E @034E   BD E3 3F         JSR   gethex2   
E351 @0351   34 02            PSHS   a   
E353 @0353   BD E3 3F         JSR   gethex2   
E356 @0356   1F 89            TFR   a,b   
E358 @0358   35 02            PULS   a   
E35A @035A   1F 01            TFR   d,x   
E35C @035C   39               RTS      
E35D @035D                       ; 
E35D @035D          GETHEX:      
E35D @035D   BD E3 C3         JSR   serin   
E360 @0360   81 30            CMPA   #$30   
E362 @0362   24 03            BHS   gh1   
E364 @0364          GHB:         
E364 @0364   8A 80            ORA   #$80   
E366 @0366   39               RTS      
E367 @0367          GH1:         
E367 @0367   81 3A            CMPA   #$3A   
E369 @0369   22 03            BHI   gh2   
E36B @036B   80 30            SUBA   #$30   
E36D @036D   39               RTS      
E36E @036E          GH2:         
E36E @036E   81 41            CMPA   #"A"   
E370 @0370   25 F2            BLO   ghb   
E372 @0372   81 46            CMPA   #"F"   
E374 @0374   22 03            BHI   gh3   
E376 @0376   80 37            SUBA   #55   
E378 @0378   39               RTS      
E379 @0379          GH3:         
E379 @0379   81 61            CMPA   #"a"   
E37B @037B   25 E7            BLO   ghb   
E37D @037D   81 66            CMPA   #"f"   
E37F @037F   22 E3            BHI   ghb   
E381 @0381   80 57            SUBA   #$57   
E383 @0383   39               RTS      
E384 @0384                       ; 
E384 @0384                       ; Print null-terminated string to serial port
E384 @0384                       ; address of the string is in the X register
E384 @0384                       ; 
E384 @0384          STROUT:      
E384 @0384   A6 80            LDA   ,x+   
E386 @0386   26 01            BNE   sout2   
E388 @0388   39               RTS      
E389 @0389          SOUT2:       
E389 @0389   BD E3 8F         JSR   serout   
E38C @038C   7E E3 84         JMP   strout   
E38F @038F                       ; 
E38F @038F                       ; send one byte from A to serial
E38F @038F                       ; 
E38F @038F          SEROUT:      
E38F @038F   34 06            PSHS   a,b   
E391 @0391          SEROUTL:      
E391 @0391   F6 83 FE         LDB   ACIAS   
E394 @0394   C4 02            ANDB   #ACIA_TDRE   
E396 @0396   27 F9            BEQ   seroutl   
E398 @0398   B7 83 FF         STA   ACIAD   
E39B @039B   35 06            PULS   a,b   
E39D @039D   39               RTS      
E39E @039E                       ; 
E39E @039E                       ; print CR LF
E39E @039E          PCRLF:       
E39E @039E   86 0D            LDA   #$d   
E3A0 @03A0   BD E3 8F         JSR   serout   
E3A3 @03A3   86 0A            LDA   #$a   
E3A5 @03A5   7E E3 8F         JMP   serout   
E3A8 @03A8                       ; 
E3A8 @03A8                       ; print monitor prompt
E3A8 @03A8          PROMPT:      
E3A8 @03A8   86 3E            LDA   #">"   
E3AA @03AA   BD E3 8F         JSR   serout   
E3AD @03AD   86 20            LDA   #$20   
E3AF @03AF   7E E3 8F         JMP   serout   
E3B2 @03B2                       ; 
E3B2 @03B2                       ; print immediate
E3B2 @03B2                       ; Usage:
E3B2 @03B2                       ;   JSR PRIMM
E3B2 @03B2                       ;   .CSTR "string to print"
E3B2 @03B2                       ; 
E3B2 @03B2          PRIMM:       
E3B2 @03B2   34 12            PSHS   a,x   
E3B4 @03B4   AE 63            LDX   3,s   
E3B6 @03B6          PRIMM1:      
E3B6 @03B6   A6 80            LDA   ,x+   
E3B8 @03B8   26 04            BNE   primm2   
E3BA @03BA   AF 63            STX   3,s   
E3BC @03BC   35 92            PULS   a,x,pc   
E3BE @03BE          PRIMM2:      
E3BE @03BE   BD E3 8F         JSR   serout   
E3C1 @03C1   20 F3            BRA   primm1   
E3C3 @03C3                       ; 
E3C3 @03C3                       ; Wait for serial char to read
E3C3 @03C3                       ; 
E3C3 @03C3          SERIN:       
E3C3 @03C3   B6 83 FE         LDA   ACIAS   
E3C6 @03C6   84 01            ANDA   #ACIA_RDRF   
E3C8 @03C8   27 F9            BEQ   serin   
E3CA @03CA   B6 83 FF         LDA   ACIAD   
E3CD @03CD   39               RTS      
E3CE @03CE                       ; 
E3CE @03CE          MON_END:   EQU   $   
E3CE @03CE                       ; 
E3CE @03CE                       ; thanks to all my Patrons
E3CE @03CE                       ; see more at https://www.patreon.com/omenmicro
E3CE @03CE                       ; 
E3CE @03CE   44 61 6E 54 6F 6D 61 6E 65 6B 0D DB   "DanTomanek",0dh   
E3D9 @03D9   4B 61 6D 69 6C 5A 0D DB   "KamilZ",0dh   
E3E0 @03E0                       ; 
E3E0 @03E0                       ; USER MODULES
E3E0 @03E0                       ; see testmod.a09 to further information
E3E0 @03E0                       ; 
E3E0 @03E0                       ;NAM	TB01V137
E3E0 @03E0                       ;*	WRITTEN 20-OCT-77 BY JOHN BYRNS
E3E0 @03E0                       ;*	REVISED 30-DEC-77
E3E0 @03E0                       ;*	REVISED 18-JAN-78
E3E0 @03E0                       ;*	REVISED 10-APR-78
E3E0 @03E0                       ;*	REVISED 08-MAY-79 TO ELIMINATE USE OF SP
E3E0 @03E0                       ;*	REVISED 24-JAN-80 TO USE 6801 ON CHIP RAM
E3E0 @03E0                       ;*	REVISED 26-JAN-80 FOR NEW 6801 INSTRUCTIONS
E3E0 @03E0                       ;*	REVISED 24-JUL-81 FOR WHISTON BOARD
E3E0 @03E0                       ;*	REVISED 24-SEP-81 INCLUDE USER FUNCTION
E3E0 @03E0                       ;*	REVISED 08-APR-82 MAKE STANDALONE INCLUDE HEX CONSTANTS AND MEM FUNCTION
E3E0 @03E0                       ;*	REVISED 21-NOV-84 FOR 6809
E3E0 @03E0                       ;*	REVISED FEB 94 ADAPTED TO SIMULATOR AND BUGFIXES BY L.C. BENSCHOP.
E3E0 @03E0                       ;*
E3E0 @03E0                       ;.engine kilo
E3E0 @03E0                       ; 
E3E0 @03E0                       ; 
E3E0 @03E0          EOL:      EQU   $04   
E3E0 @03E0          ETX:      EQU   $03   
E3E0 @03E0          SPACE:    EQU   $20   
E3E0 @03E0          CR:       EQU   $0D   
E3E0 @03E0          LF:       EQU   $0A   
E3E0 @03E0          BS:       EQU   $08   
E3E0 @03E0          CAN:      EQU   $18   
E3E0 @03E0          BELL:     EQU   $07   
E3E0 @03E0          FILL:     EQU   $00   
E3E0 @03E0          DEL:      EQU   $7F   
E3E0 @03E0          BSIZE:    EQU   73   
E3E0 @03E0          STKCUS:   EQU   48   
E3E0 @03E0                       ;*
E3E0 @03E0          BACIA:    EQU   $83FE   
E3E0 @03E0          RMCR:     EQU   bACIA   
E3E0 @03E0          TRCS:     EQU   bACIA   
E3E0 @03E0          RECEV:    EQU   bACIA+1   
E3E0 @03E0          TRANS:    EQU   bACIA+1   
E3E0 @03E0          CNTL1:    EQU   $03   
E3E0 @03E0          CNTL2:    EQU   $15   
E3E0 @03E0          RDRF:     EQU   $01   
E3E0 @03E0          ORFE:     EQU   $20   
E3E0 @03E0          TDRE:     EQU   $02   
E3E0 @03E0                       ;* EDIT THE FOLLOWING EQUATES TO REFLECT THE
E3E0 @03E0                       ;* DESIRED ROM AND RAM LAYOUT
E3E0 @03E0          LORAM:    EQU   $0080   ;ADDRESS OF DIRECT PAGE SCRATCH RAM
E3E0 @03E0          BUFFER:   EQU   $0200   ;ADDRESS OF MAIN RAM
E3E0 @03E0          RAMSIZ:   EQU   $2000   ;SIZE OF MAIN RAM
E3E0 @03E0          ROMADR:   EQU   $f000   ;ADDRESS OF TINY BASIC ROM
E3E0 @03E0                       ;*
E3E0 @03E0          RAMBEG:   EQU   BUFFER+BSIZE   
E3E0 @03E0          RAMEND:   EQU   BUFFER+RAMSIZ   
E3E0 @03E0                       ;*
E3E0 @03E0          RAMPAT:   EQU   $AA0F   
E3E0 @03E0          ROMPAT:   EQU   $F055   
E3E0 @03E0                       ;*
E3E0 @03E0                       ;	ORG	LORAM
000A @-DFF6                   .BSSEG      
000A @-DFF6         USRBAS:   RMB   2   
000C @-DFF4         USRTOP:   RMB   2   
000E @-DFF2         STKLIM:   RMB   2   
0010 @-DFF0         STKTOP:   RMB   2   
0012 @-DFEE         CURSOR:   RMB   2   
0014 @-DFEC         SAVESP:   RMB   2   
0016 @-DFEA         LINENB:   RMB   2   
0018 @-DFE8         SCRTCH:   RMB   2   
001A @-DFE6         CHAR:     RMB   2   
001C @-DFE4         ZONE:     RMB   1   
001D @-DFE3         MODE:     RMB   1   
001E @-DFE2         RESRVD:   RMB   1   
001F @-DFE1         LOEND:    EQU   $   
001F @-DFE1                      ;*
001F @-DFE1                      ; 
E3E0 @03E0                    .CSEG      
E3E0 @03E0                       ;	ORG     ROMADR
E3E0 @03E0                    ALIGN   256   
E400 @0400                    .ENT   $   
E400 @0400                       ; 
E400 @0400   7E E4 15 BASIC:   JMP   SETUP   
E403 @0403   4D 4F 44 39 42 41 53 49 43 00 .CSTR   "MOD9BASIC"   
E40D @040D   10 DE 10 WARMS:   LDS   STKTOP   
E410 @0410   BD EB E5         JSR   INTEEE   
E413 @0413   20 13            BRA   WMS05   
E415 @0415   10 CE 21 CC SETUP:   LDS   #RAMEND-52   
E419 @0419   10 DF 10 SET03:   STS   STKTOP   
E41C @041C   BD EB E5         JSR   INTEEE   
E41F @041F   CC 02 49 CLEAR:   LDD   #RAMBEG   
E422 @0422   DD 0A            STD   USRBAS   
E424 @0424   DD 0C            STD   USRTOP   
E426 @0426   DD 0E  CLR02:    STD   STKLIM   
E428 @0428   BD E5 3F WMS05:   JSR   CRLF   
E42B @042B   8E E4 83         LDX   #VSTR   
E42E @042E   BD E5 38         JSR   PUTSTR   
E431 @0431   10 DE 10 CMDB:   LDS   STKTOP   
E434 @0434   0F 1D            CLR   MODE   
E436 @0436   BD E5 3F         JSR   CRLF   
E439 @0439   9E 0A            LDX   USRBAS   
E43B @043B   9F 12            STX   CURSOR   
E43D @043D   8E 00 00 CMDE:   LDX   #0000   
E440 @0440   9F 16            STX   LINENB   
E442 @0442   0D 1D            TST   MODE   
E444 @0444   26 05            BNE   CMD01   
E446 @0446   86 3A            LDA   #":"   
E448 @0448   BD EB AA         JSR   PUTCHR   
E44B @044B   BD E5 90 CMD01:   JSR   GETLIN   
E44E @044E   BD E6 EA         JSR   TSTNBR   
E451 @0451   24 0E            BCC   CMD02   
E453 @0453   29 2B            BVS   CMD05   
E455 @0455   BD E6 5B         JSR   SKIPSP   
E458 @0458   81 04            CMPA   #EOL   
E45A @045A   27 E1            BEQ   CMDE   
E45C @045C   BD E6 0D         JSR   MSLINE   
E45F @045F   20 D0            BRA   CMDB   
E461 @0461   34 10  CMD02:    PSHS   X   
E463 @0463   9E 0C            LDX   USRTOP   
E465 @0465   9C 0E            CMPX   STKLIM   
E467 @0467   35 10            PULS   X   
E469 @0469   27 03            BEQ   CMD03   
E46B @046B   7E E5 5F         JMP   ERRORR   
E46E @046E   C3 00 00 CMD03:   ADDD   #0   
E471 @0471   27 0D            BEQ   CMD05   
E473 @0473   34 06  CMD04:    PSHS   D   
E475 @0475   83 27 0F         SUBD   #9999   
E478 @0478   35 06            PULS   D   
E47A @047A   22 04            BHI   CMD05   
E47C @047C   8D 10            BSR   EDITOR   
E47E @047E   20 BD            BRA   CMDE   
E480 @0480   7E E5 56 CMD05:   JMP   ERRORS   
E483 @0483   54 49 4E 59 20 56 31 2E 33 37 VSTR:   DB   "TINY V1.37"   
E48D @048D   04               FCB   EOL   
E48E @048E                       ;******************************
E48E @048E                       ;******************************
E48E @048E   34 06  EDITOR:   PSHS   D   
E490 @0490   BD E6 5B         JSR   SKIPSP   
E493 @0493   9F 18            STX   SCRTCH   
E495 @0495   A6 60            LDA   0,S   
E497 @0497   9E 12            LDX   CURSOR   
E499 @0499   9C 0C            CMPX   USRTOP   
E49B @049B   27 05            BEQ   ED00   
E49D @049D   10 A3 00         CMPD   0,X   
E4A0 @04A0   24 02            BCC   ED01   
E4A2 @04A2   9E 0A  ED00:     LDX   USRBAS   
E4A4 @04A4   BD E7 C4 ED01:   JSR   FNDLIN   
E4A7 @04A7   9F 12            STX   CURSOR   
E4A9 @04A9   25 22            BCS   ED04   
E4AB @04AB   9F 14            STX   SAVESP   
E4AD @04AD   30 02            LEAX   2,X   
E4AF @04AF   A6 80  ED02:     LDA   ,X+   
E4B1 @04B1   81 04            CMPA   #EOL   
E4B3 @04B3   26 FA            BNE   ED02   
E4B5 @04B5   9C 0C  ED03:     CMPX   USRTOP   
E4B7 @04B7   27 0E            BEQ   ED35   
E4B9 @04B9   A6 80            LDA   ,X+   
E4BB @04BB   9F 1A            STX   CHAR   
E4BD @04BD   9E 14            LDX   SAVESP   
E4BF @04BF   A7 80            STA   ,X+   
E4C1 @04C1   9F 14            STX   SAVESP   
E4C3 @04C3   9E 1A            LDX   CHAR   
E4C5 @04C5   20 EE            BRA   ED03   
E4C7 @04C7   9E 14  ED35:     LDX   SAVESP   
E4C9 @04C9   9F 0C            STX   USRTOP   
E4CB @04CB   9F 0E            STX   STKLIM   
E4CD @04CD   9E 18  ED04:     LDX   SCRTCH   
E4CF @04CF   C6 FF            LDB   #-1   
E4D1 @04D1   5C     ED05:     INCB      
E4D2 @04D2   A6 80            LDA   ,X+   
E4D4 @04D4   81 04            CMPA   #EOL   
E4D6 @04D6   26 F9            BNE   ED05   
E4D8 @04D8   5D               TSTB      
E4D9 @04D9   26 03            BNE   ED55   
E4DB @04DB   32 62            LEAS   2,S   
E4DD @04DD   39               RTS      
E4DE @04DE   30 1F  ED55:     LEAX   -1,X   
E4E0 @04E0   CB 04            ADDB   #4   
E4E2 @04E2   30 1F  ED06:     LEAX   -1,X   
E4E4 @04E4   5A               DECB      
E4E5 @04E5   A6 00            LDA   0,X   
E4E7 @04E7   81 20            CMPA   #SPACE   
E4E9 @04E9   27 F7            BEQ   ED06   
E4EB @04EB   86 04            LDA   #EOL   
E4ED @04ED   A7 01            STA   1,X   
E4EF @04EF   4F               CLRA      
E4F0 @04F0   9E 0C            LDX   USRTOP   
E4F2 @04F2   9F 1A            STX   CHAR   
E4F4 @04F4   D3 0C            ADDD   USRTOP   
E4F6 @04F6   DD 0C            STD   USRTOP   
E4F8 @04F8   DD 0E            STD   STKLIM   
E4FA @04FA   BD E7 62         JSR   TSTSTK   
E4FD @04FD   24 07            BCC   ED07   
E4FF @04FF   9F 0C            STX   USRTOP   
E501 @0501   9F 0E            STX   STKLIM   
E503 @0503   7E E5 4E         JMP   ERRORF   
E506 @0506   9E 0C  ED07:     LDX   USRTOP   
E508 @0508   9F 14  ED08:     STX   SAVESP   
E50A @050A   9E 1A            LDX   CHAR   
E50C @050C   9C 12            CMPX   CURSOR   
E50E @050E   27 0A            BEQ   ED09   
E510 @0510   A6 82            LDA   ,-X   
E512 @0512   9F 1A            STX   CHAR   
E514 @0514   9E 14            LDX   SAVESP   
E516 @0516   A7 82            STA   ,-X   
E518 @0518   20 EE            BRA   ED08   
E51A @051A   35 06  ED09:     PULS   D   
E51C @051C   9E 12            LDX   CURSOR   
E51E @051E   ED 81            STD   ,X++   
E520 @0520   9F 1A            STX   CHAR   
E522 @0522   9E 18  ED10:     LDX   SCRTCH   
E524 @0524   A6 80            LDA   ,X+   
E526 @0526   9F 18            STX   SCRTCH   
E528 @0528   9E 1A            LDX   CHAR   
E52A @052A   A7 80            STA   ,X+   
E52C @052C   9F 1A            STX   CHAR   
E52E @052E   81 04            CMPA   #EOL   
E530 @0530   26 F0            BNE   ED10   
E532 @0532   39               RTS      
E533 @0533                       ;******************************
E533 @0533                       ;******************************
E533 @0533   BD EB AA PUTS01:   JSR   PUTCHR   
E536 @0536   30 01            LEAX   1,X   
E538 @0538   A6 00  PUTSTR:   LDA   0,X   
E53A @053A   81 04            CMPA   #EOL   
E53C @053C   26 F5            BNE   PUTS01   
E53E @053E   39               RTS      
E53F @053F                       ;******************************
E53F @053F                       ;******************************
E53F @053F   8E E5 47 CRLF:   LDX   #CRLFST   
E542 @0542   8D F4            BSR   PUTSTR   
E544 @0544   0F 1C            CLR   ZONE   
E546 @0546   39               RTS      
E547 @0547   0D 0A 7F 00 00 00 04 CRLFST:   FCB   CR,LF,DEL,FILL,FILL,FILL,EOL   
E54E @054E                       ;******************************
E54E @054E                       ;******************************
E54E @054E   8D 24  ERRORF:   BSR   ER01   
E550 @0550   53 4F 52 52 59   DB   "SORRY"   
E555 @0555   04               FCB   EOL   
E556 @0556   8D 1C  ERRORS:   BSR   ER01   
E558 @0558   57 48 41 54 20 3F DB   "WHAT ?"   
E55E @055E   04               FCB   EOL   
E55F @055F   8D 13  ERRORR:   BSR   ER01   
E561 @0561   48 4F 57 20 3F   DB   "HOW ?"   
E566 @0566   04               FCB   EOL   
E567 @0567   8D 0B  BREAK:    BSR   ER01   
E569 @0569   42 52 45 41 4B   DB   "BREAK"   
E56E @056E   04               FCB   EOL   
E56F @056F                    END   BSR	ER01   
E56F @056F   53 54 4F 50      DB   "STOP"   
E573 @0573   04               FCB   EOL   
E574 @0574   8D C9  ER01:     BSR   CRLF   
E576 @0576   86 07            LDA   #BELL   
E578 @0578   BD EB AA         JSR   PUTCHR   
E57B @057B   DC 16            LDD   LINENB   
E57D @057D   BD EA 5E         JSR   PRNT4   
E580 @0580   86 20            LDA   #SPACE   
E582 @0582   BD EB AA         JSR   PUTCHR   
E585 @0585   35 10            PULS   X   
E587 @0587   8D AF            BSR   PUTSTR   
E589 @0589   8D B4            BSR   CRLF   
E58B @058B   7E E4 31         JMP   CMDB   
E58E @058E                       ;******************************
E58E @058E                       ;******************************
E58E @058E   8D AF  GL00:     BSR   CRLF   
E590 @0590   8E 02 00 GETLIN:   LDX   #BUFFER   
E593 @0593   BD EB A0 GL03:   JSR   GETCHR   
E596 @0596   81 20            CMPA   #SPACE   
E598 @0598   25 14            BCS   GL05   
E59A @059A   81 7F            CMPA   #$7F   
E59C @059C   27 F5            BEQ   GL03   
E59E @059E   8C 02 48         CMPX   #BUFFER+BSIZE-1   
E5A1 @05A1   26 04            BNE   GL04   
E5A3 @05A3   86 07            LDA   #BELL   
E5A5 @05A5   20 02            BRA   GL02   
E5A7 @05A7   A7 80  GL04:     STA   ,X+   
E5A9 @05A9   BD EB AA GL02:   JSR   PUTCHR   
E5AC @05AC   20 E5            BRA   GL03   
E5AE @05AE   81 08  GL05:     CMPA   #BS   
E5B0 @05B0   27 24            BEQ   GL07   
E5B2 @05B2   81 18            CMPA   #CAN   
E5B4 @05B4   27 D8            BEQ   GL00   
E5B6 @05B6   81 0A            CMPA   #LF   
E5B8 @05B8   27 31            BEQ   GL09   
E5BA @05BA   81 0D            CMPA   #CR   
E5BC @05BC   26 D5            BNE   GL03   
E5BE @05BE   0D 1D            TST   MODE   
E5C0 @05C0   27 05            BEQ   GL06   
E5C2 @05C2   BD EB AA         JSR   PUTCHR   
E5C5 @05C5   20 07            BRA   GL08   
E5C7 @05C7   34 10  GL06:     PSHS   X   
E5C9 @05C9   BD E5 3F         JSR   CRLF   
E5CC @05CC   35 10            PULS   X   
E5CE @05CE   86 04  GL08:     LDA   #EOL   
E5D0 @05D0   A7 00            STA   0,X   
E5D2 @05D2   8E 02 00         LDX   #BUFFER   
E5D5 @05D5   39               RTS      
E5D6 @05D6   8C 02 00 GL07:   CMPX   #BUFFER   
E5D9 @05D9   27 B8            BEQ   GL03   
E5DB @05DB   30 1F            LEAX   -1,X   
E5DD @05DD   86 08            LDA   #BS   
E5DF @05DF   BD EB AA         JSR   PUTCHR   
E5E2 @05E2   86 20            LDA   #SPACE   
E5E4 @05E4   BD EB AA         JSR   PUTCHR   
E5E7 @05E7   86 08            LDA   #BS   
E5E9 @05E9   20 BE            BRA   GL02   
E5EB @05EB   1A 01  GL09:     ORCC   #$01   
E5ED @05ED   06 1D            ROR   MODE   
E5EF @05EF   20 B8            BRA   GL02   
E5F1 @05F1                       ;******************************
E5F1 @05F1                       ;******************************
E5F1 @05F1   30 01  REM00:    LEAX   1,X   
E5F3 @05F3   8D 66  REM:      BSR   SKIPSP   
E5F5 @05F5   81 04            CMPA   #EOL   
E5F7 @05F7   26 F8            BNE   REM00   
E5F9 @05F9   BD E9 31 ENDSMT:   JSR   TSTEOL   
E5FC @05FC   96 16  ENDS02:   LDA   LINENB   
E5FE @05FE   9A 17            ORA   LINENB+1   
E600 @0600   27 14            BEQ   REM09   
E602 @0602   9C 0C  REM05:    CMPX   USRTOP   
E604 @0604   26 03            BNE   NXTLIN   
E606 @0606   7E E5 5F         JMP   ERRORR   
E609 @0609   EC 81  NXTLIN:   LDD   ,X++   
E60B @060B   DD 16            STD   LINENB   
E60D @060D   BD EB 9C MSLINE:   JSR   TSTBRK   
E610 @0610   8D 08            BSR   IFAN   
E612 @0612   25 03            BCS   IMPLET   
E614 @0614   34 06            PSHS   D   
E616 @0616   39     REM09:    RTS      
E617 @0617   7E E9 42 IMPLET:   JMP   LET   
E61A @061A                       ;******************************
E61A @061A                       ;******************************
E61A @061A   8D 3F  IFAN:     BSR   SKIPSP   
E61C @061C   9F 12            STX   CURSOR   
E61E @061E   8E EB 37         LDX   #VERBT   
E621 @0621   A6 80  FAN00:    LDA   ,X+   
E623 @0623   81 04            CMPA   #EOL   
E625 @0625   26 05            BNE   FAN04   
E627 @0627   9E 12            LDX   CURSOR   
E629 @0629   1A 01            ORCC   #$01   
E62B @062B   39               RTS      
E62C @062C   9F 1A  FAN04:    STX   CHAR   
E62E @062E   9E 12            LDX   CURSOR   
E630 @0630   9F 18            STX   SCRTCH   
E632 @0632   9E 18  FAN05:    LDX   SCRTCH   
E634 @0634   A1 00            CMPA   0,X   
E636 @0636   26 15            BNE   FAN07   
E638 @0638   30 01            LEAX   1,X   
E63A @063A   9F 18            STX   SCRTCH   
E63C @063C   9E 1A            LDX   CHAR   
E63E @063E   A6 80            LDA   ,X+   
E640 @0640   9F 1A            STX   CHAR   
E642 @0642   81 04            CMPA   #EOL   
E644 @0644   26 EC            BNE   FAN05   
E646 @0646   EC 00            LDD   0,X   
E648 @0648   9E 18            LDX   SCRTCH   
E64A @064A   1C FE            ANDCC   #$FE   
E64C @064C   39               RTS      
E64D @064D   9E 1A  FAN07:    LDX   CHAR   
E64F @064F   A6 80  FAN08:    LDA   ,X+   
E651 @0651   81 04            CMPA   #EOL   
E653 @0653   26 FA            BNE   FAN08   
E655 @0655   30 02            LEAX   2,X   
E657 @0657   20 C8            BRA   FAN00   
E659 @0659                       ;******************************
E659 @0659                       ;******************************
E659 @0659   30 01  NXTNSP:   LEAX   1,X   
E65B @065B   A6 00  SKIPSP:   LDA   0,X   
E65D @065D   81 20            CMPA   #SPACE   
E65F @065F   27 F8            BEQ   NXTNSP   
E661 @0661   39               RTS      
E662 @0662                       ;******************************
E662 @0662                       ;******************************
E662 @0662   8D 1A  TSTHEX:   BSR   TSTDIG   
E664 @0664   24 22            BCC   TST05   
E666 @0666   81 41            CMPA   #"A"   
E668 @0668   25 11            BCS   TST03   
E66A @066A   81 46            CMPA   #"F"   
E66C @066C   22 0D            BHI   TST03   
E66E @066E   80 37            SUBA   #"A"-10   
E670 @0670   1C FE            ANDCC   #$FE   
E672 @0672   39               RTS      
E673 @0673                       ;******************************
E673 @0673                       ;******************************
E673 @0673   81 41  TSTLTR:   CMPA   #"A"   
E675 @0675   25 04            BCS   TST03   
E677 @0677   81 5A            CMPA   #"Z"   
E679 @0679   23 0D            BLS   TST05   
E67B @067B   1A 01  TST03:    ORCC   #$01   
E67D @067D   39               RTS      
E67E @067E                       ;******************************
E67E @067E                       ;******************************
E67E @067E   81 30  TSTDIG:   CMPA   #"0"   
E680 @0680   25 F9            BCS   TST03   
E682 @0682   81 39            CMPA   #"9"   
E684 @0684   22 F5            BHI   TST03   
E686 @0686   80 30            SUBA   #"0"   
E688 @0688   1C FE  TST05:    ANDCC   #$FE   
E68A @068A   39               RTS      
E68B @068B                       ;******************************
E68B @068B                       ;******************************
E68B @068B   8D CE  TSTVAR:   BSR   SKIPSP   
E68D @068D   8D E4            BSR   TSTLTR   
E68F @068F   25 12            BCS   TSTV03   
E691 @0691   1F 89            TFR   A,B   
E693 @0693   A6 01            LDA   1,X   
E695 @0695   8D DC            BSR   TSTLTR   
E697 @0697   24 E2            BCC   TST03   
E699 @0699   30 01            LEAX   1,X   
E69B @069B   C0 41            SUBB   #"A"   
E69D @069D   58               ASLB      
E69E @069E   4F               CLRA      
E69F @069F   D3 10            ADDD   STKTOP   
E6A1 @06A1   1C FE  TSTV02:   ANDCC   #$FE   
E6A3 @06A3   39     TSTV03:   RTS      
E6A4 @06A4                       ;******************************
E6A4 @06A4                       ;******************************
E6A4 @06A4   BD E9 10 USER:   JSR   ARGONE   
E6A7 @06A7   34 06            PSHS   D   
E6A9 @06A9   BD E6 5B         JSR   SKIPSP   
E6AC @06AC   81 2C            CMPA   #","   
E6AE @06AE   27 09            BEQ   USER03   
E6B0 @06B0   81 29            CMPA   #")"   
E6B2 @06B2   1A 01            ORCC   #$01   
E6B4 @06B4   27 15            BEQ   USER05   
E6B6 @06B6   7E E5 56 USER02:   JMP   ERRORS   
E6B9 @06B9   30 01  USER03:   LEAX   1,X   
E6BB @06BB   BD E8 43         JSR   EXPR   
E6BE @06BE   34 02            PSHS   A   
E6C0 @06C0   BD E6 5B         JSR   SKIPSP   
E6C3 @06C3   81 29            CMPA   #")"   
E6C5 @06C5   35 02            PULS   A   
E6C7 @06C7   26 ED            BNE   USER02   
E6C9 @06C9   1C FE            ANDCC   #$FE   
E6CB @06CB   30 01  USER05:   LEAX   1,X   
E6CD @06CD   9F 12            STX   CURSOR   
E6CF @06CF   AD F1            JSR   [,S++]   
E6D1 @06D1   9E 12            LDX   CURSOR   
E6D3 @06D3   1C FE            ANDCC   #$FE   
E6D5 @06D5   39               RTS      
E6D6 @06D6                       ;******************************
E6D6 @06D6                       ;******************************
E6D6 @06D6   BD E6 5B TSTSNB:   JSR   SKIPSP   
E6D9 @06D9   81 2D            CMPA   #"-"   
E6DB @06DB   26 0D            BNE   TSTNBR   
E6DD @06DD   30 01            LEAX   1,X   
E6DF @06DF   8D 09            BSR   TSTNBR   
E6E1 @06E1   25 06            BCS   TSN02   
E6E3 @06E3   40               NEGA      
E6E4 @06E4   50               NEGB      
E6E5 @06E5   82 00            SBCA   #0   
E6E7 @06E7   1C FC            ANDCC   #$FC   
E6E9 @06E9   39     TSN02:    RTS      
E6EA @06EA                       ;******************************
E6EA @06EA                       ;******************************
E6EA @06EA   BD E6 5B TSTNBR:   JSR   SKIPSP   
E6ED @06ED   BD E6 7E         JSR   TSTDIG   
E6F0 @06F0   24 2F            BCC   TSTN02   
E6F2 @06F2   81 24            CMPA   #"$"   
E6F4 @06F4   1A 01            ORCC   #$01   
E6F6 @06F6   26 60            BNE   TSTN09   
E6F8 @06F8   30 01  TSTN20:   LEAX   1,X   
E6FA @06FA   6F E2            CLR   ,-S   
E6FC @06FC   6F E2            CLR   ,-S   
E6FE @06FE   A6 00  TSTN23:   LDA   0,X   
E700 @0700   BD E6 62         JSR   TSTHEX   
E703 @0703   25 4F            BCS   TSTN07   
E705 @0705   30 01            LEAX   1,X   
E707 @0707   34 10            PSHS   X   
E709 @0709   34 02            PSHS   A   
E70B @070B   EC 63            LDD   3,S   
E70D @070D   85 F0            BITA   #$F0   
E70F @070F   26 4A            BNE   TSTN11   
E711 @0711   58               ASLB      
E712 @0712   49               ROLA      
E713 @0713   58               ASLB      
E714 @0714   49               ROLA      
E715 @0715   58               ASLB      
E716 @0716   49               ROLA      
E717 @0717   58               ASLB      
E718 @0718   49               ROLA      
E719 @0719   EB E0            ADDB   ,S+   
E71B @071B   ED 62            STD   2,S   
E71D @071D   35 10            PULS   X   
E71F @071F   20 DD            BRA   TSTN23   
E721 @0721   30 01  TSTN02:   LEAX   1,X   
E723 @0723   34 02            PSHS   A   
E725 @0725   6F E2            CLR   ,-S   
E727 @0727   A6 00  TSTN03:   LDA   0,X   
E729 @0729   BD E6 7E         JSR   TSTDIG   
E72C @072C   25 26            BCS   TSTN07   
E72E @072E   30 01            LEAX   1,X   
E730 @0730   34 10            PSHS   X   
E732 @0732   34 02            PSHS   A   
E734 @0734   EC 63            LDD   3,S   
E736 @0736   58               ASLB      
E737 @0737   49               ROLA      
E738 @0738   29 21            BVS   TSTN11   
E73A @073A   58               ASLB      
E73B @073B   49               ROLA      
E73C @073C   29 1D            BVS   TSTN11   
E73E @073E   E3 63            ADDD   3,S   
E740 @0740   29 19            BVS   TSTN11   
E742 @0742   58               ASLB      
E743 @0743   49               ROLA      
E744 @0744   29 15            BVS   TSTN11   
E746 @0746   EB 60            ADDB   0,S   
E748 @0748   89 00            ADCA   #0   
E74A @074A   29 0F            BVS   TSTN11   
E74C @074C   ED 63            STD   3,S   
E74E @074E   32 61            LEAS   1,S   
E750 @0750   35 10            PULS   X   
E752 @0752   20 D3            BRA   TSTN03   
E754 @0754   35 06  TSTN07:   PULS   D   
E756 @0756   1C FE            ANDCC   #$FE   
E758 @0758   1C FD  TSTN09:   ANDCC   #$FD   
E75A @075A   39               RTS      
E75B @075B   AE 61  TSTN11:   LDX   1,S   
E75D @075D   32 65            LEAS   5,S   
E75F @075F   1A 03            ORCC   #$03   
E761 @0761   39               RTS      
E762 @0762                       ;******************************
E762 @0762                       ;******************************
E762 @0762   10 DF 14 TSTSTK:   STS   SAVESP   
E765 @0765   DC 14            LDD   SAVESP   
E767 @0767   83 00 30         SUBD   #STKCUS   
E76A @076A   93 0E            SUBD   STKLIM   
E76C @076C   39               RTS      
E76D @076D                       ;******************************
E76D @076D                       ;******************************
E76D @076D   BD E8 FD PEEK:   JSR   PAREXP   
E770 @0770   34 06            PSHS   D   
E772 @0772   34 10            PSHS   X   
E774 @0774   E6 72            LDB   [2,S]   
E776 @0776   35 10            PULS   X   
E778 @0778   32 62            LEAS   2,S   
E77A @077A   4F               CLRA      
E77B @077B   39               RTS      
E77C @077C                       ;******************************
E77C @077C                       ;******************************
E77C @077C   BD E8 FD POKE:   JSR   PAREXP   
E77F @077F   34 06            PSHS   D   
E781 @0781   BD E6 5B         JSR   SKIPSP   
E784 @0784   81 3D            CMPA   #"="   
E786 @0786   27 03            BEQ   POKE05   
E788 @0788   7E E5 56         JMP   ERRORS   
E78B @078B   30 01  POKE05:   LEAX   1,X   
E78D @078D   BD E8 43         JSR   EXPR   
E790 @0790   BD E9 31         JSR   TSTEOL   
E793 @0793   34 10            PSHS   X   
E795 @0795   E7 72            STB   [2,S]   
E797 @0797   35 10            PULS   X   
E799 @0799   32 62            LEAS   2,S   
E79B @079B   7E E5 FC         JMP   ENDS02   
E79E @079E                       ;******************************
E79E @079E                       ;******************************
E79E @079E   BD E6 5B TSTFUN:   JSR   SKIPSP   
E7A1 @07A1   9F 12            STX   CURSOR   
E7A3 @07A3   8E E7 AE         LDX   #FUNT   
E7A6 @07A6   BD E6 21         JSR   FAN00   
E7A9 @07A9   25 02            BCS   TSTF05   
E7AB @07AB   34 06            PSHS   D   
E7AD @07AD   39     TSTF05:   RTS      
E7AE @07AE                       ;******************************
E7AE @07AE                       ;******************************
E7AE @07AE   55 53 52 FUNT:   DB   "USR"   
E7B1 @07B1   04               FCB   EOL   
E7B2 @07B2   E6 A4            FDB   USER   
E7B4 @07B4   50 45 45 4B      DB   "PEEK"   
E7B8 @07B8   04               FCB   EOL   
E7B9 @07B9   E7 6D            FDB   PEEK   
E7BB @07BB   4D 45 4D         DB   "MEM"   
E7BE @07BE   04               FCB   EOL   
E7BF @07BF   E7 62            FDB   TSTSTK   
E7C1 @07C1   04               FCB   EOL   
E7C2 @07C2                       ;******************************
E7C2 @07C2                       ;******************************
E7C2 @07C2   9E 0A  FLINE:    LDX   USRBAS   
E7C4 @07C4   9C 0C  FNDLIN:   CMPX   USRTOP   
E7C6 @07C6   26 03            BNE   FND03   
E7C8 @07C8   1A 03            ORCC   #$03   
E7CA @07CA   39               RTS      
E7CB @07CB   10 A3 00 FND03:   CMPD   0,X   
E7CE @07CE   26 03            BNE   FND05   
E7D0 @07D0   1C FC            ANDCC   #$FC   
E7D2 @07D2   39               RTS      
E7D3 @07D3   24 05  FND05:    BCC   FND07   
E7D5 @07D5   1A 01            ORCC   #$01   
E7D7 @07D7   1C FD            ANDCC   #$FD   
E7D9 @07D9   39               RTS      
E7DA @07DA   34 02  FND07:    PSHS   A   
E7DC @07DC   86 04            LDA   #EOL   
E7DE @07DE   30 01            LEAX   1,X   
E7E0 @07E0   30 01  FND09:    LEAX   1,X   
E7E2 @07E2   A1 00            CMPA   0,X   
E7E4 @07E4   26 FA            BNE   FND09   
E7E6 @07E6   35 02            PULS   A   
E7E8 @07E8   30 01            LEAX   1,X   
E7EA @07EA   20 D8            BRA   FNDLIN   
E7EC @07EC                       ;******************************
E7EC @07EC                       ;******************************
E7EC @07EC   8D 55  RELEXP:   BSR   EXPR   
E7EE @07EE   34 06            PSHS   D   
E7F0 @07F0   5F               CLRB      
E7F1 @07F1   BD E6 5B         JSR   SKIPSP   
E7F4 @07F4   81 3D            CMPA   #"="   
E7F6 @07F6   27 23            BEQ   REL06   
E7F8 @07F8   81 3C            CMPA   #"<"   
E7FA @07FA   26 10            BNE   REL03   
E7FC @07FC   30 01            LEAX   1,X   
E7FE @07FE   5C               INCB      
E7FF @07FF   BD E6 5B         JSR   SKIPSP   
E802 @0802   81 3E            CMPA   #">"   
E804 @0804   26 11            BNE   REL05   
E806 @0806   30 01            LEAX   1,X   
E808 @0808   CB 04            ADDB   #4   
E80A @080A   20 13            BRA   REL07   
E80C @080C   81 3E  REL03:    CMPA   #">"   
E80E @080E   26 5F            BNE   EXPR06   
E810 @0810   30 01            LEAX   1,X   
E812 @0812   CB 04            ADDB   #4   
E814 @0814   BD E6 5B         JSR   SKIPSP   
E817 @0817   81 3D  REL05:    CMPA   #"="   
E819 @0819   26 04            BNE   REL07   
E81B @081B   30 01  REL06:    LEAX   1,X   
E81D @081D   CB 02            ADDB   #2   
E81F @081F   34 04  REL07:    PSHS   B   
E821 @0821   8D 20            BSR   EXPR   
E823 @0823   34 10            PSHS   X   
E825 @0825   A3 63            SUBD   3,S   
E827 @0827   1F A8            TFR   CC,A   
E829 @0829   44               LSRA      
E82A @082A   1F 89            TFR   A,B   
E82C @082C   48               ASLA      
E82D @082D   48               ASLA      
E82E @082E   34 04            PSHS   B   
E830 @0830   AB E0            ADDA   ,S+   
E832 @0832   84 06            ANDA   #$06   
E834 @0834   26 01            BNE   REL08   
E836 @0836   4C               INCA      
E837 @0837   5F     REL08:    CLRB      
E838 @0838   A4 62            ANDA   2,S   
E83A @083A   27 01            BEQ   REL09   
E83C @083C   53               COMB      
E83D @083D   4F     REL09:    CLRA      
E83E @083E   35 10            PULS   X   
E840 @0840   32 63            LEAS   3,S   
E842 @0842   39               RTS      
E843 @0843                       ;******************************
E843 @0843                       ;******************************
E843 @0843   6F E2  EXPR:     CLR   ,-S   
E845 @0845   6F E2            CLR   ,-S   
E847 @0847   BD E6 5B         JSR   SKIPSP   
E84A @084A   81 2D            CMPA   #"-"   
E84C @084C   27 17            BEQ   EXPR05   
E84E @084E   81 2B            CMPA   #"+"   
E850 @0850   26 02            BNE   EXPR03   
E852 @0852   30 01  EXPR02:   LEAX   1,X   
E854 @0854   8D 1C  EXPR03:   BSR   TERM   
E856 @0856   E3 60  EXPR04:   ADDD   0,S   
E858 @0858   ED 60            STD   0,S   
E85A @085A   BD E6 5B         JSR   SKIPSP   
E85D @085D   81 2B            CMPA   #"+"   
E85F @085F   27 F1            BEQ   EXPR02   
E861 @0861   81 2D            CMPA   #"-"   
E863 @0863   26 0A            BNE   EXPR06   
E865 @0865   30 01  EXPR05:   LEAX   1,X   
E867 @0867   8D 09            BSR   TERM   
E869 @0869   40               NEGA      
E86A @086A   50               NEGB      
E86B @086B   82 00            SBCA   #0   
E86D @086D   20 E7            BRA   EXPR04   
E86F @086F   35 06  EXPR06:   PULS   D   
E871 @0871   39               RTS      
E872 @0872                       ;******************************
E872 @0872                       ;******************************
E872 @0872   BD E8 E5 TERM:   JSR   FACT   
E875 @0875   34 06            PSHS   D   
E877 @0877   BD E6 5B TERM03:   JSR   SKIPSP   
E87A @087A   81 2A            CMPA   #"*"   
E87C @087C   27 48            BEQ   TERM07   
E87E @087E   81 2F            CMPA   #"/"   
E880 @0880   27 03            BEQ   TERM05   
E882 @0882   35 06            PULS   D   
E884 @0884   39               RTS      
E885 @0885   30 01  TERM05:   LEAX   1,X   
E887 @0887   8D 5C            BSR   FACT   
E889 @0889   34 10            PSHS   X   
E88B @088B   30 62            LEAX   2,S   
E88D @088D   34 06            PSHS   D   
E88F @088F   A8 00            EORA   0,X   
E891 @0891   BD E9 24         JSR   ABSX   
E894 @0894   30 60            LEAX   0,S   
E896 @0896   BD E9 24         JSR   ABSX   
E899 @0899   34 02            PSHS   A   
E89B @089B   86 11            LDA   #17   
E89D @089D   34 02            PSHS   A   
E89F @089F   4F               CLRA      
E8A0 @08A0   5F               CLRB      
E8A1 @08A1   A3 62  DIV05:    SUBD   2,S   
E8A3 @08A3   24 06            BCC   DIV07   
E8A5 @08A5   E3 62            ADDD   2,S   
E8A7 @08A7   1C FE            ANDCC   #$FE   
E8A9 @08A9   20 02            BRA   DIV09   
E8AB @08AB   1A 01  DIV07:    ORCC   #$01   
E8AD @08AD   69 67  DIV09:    ROL   7,S   
E8AF @08AF   69 66            ROL   6,S   
E8B1 @08B1   59               ROLB      
E8B2 @08B2   49               ROLA      
E8B3 @08B3   6A 60            DEC   0,S   
E8B5 @08B5   26 EA            BNE   DIV05   
E8B7 @08B7   A6 61            LDA   1,S   
E8B9 @08B9   32 64            LEAS   4,S   
E8BB @08BB   4D               TSTA      
E8BC @08BC   2A 04            BPL   TERM06   
E8BE @08BE   30 62            LEAX   2,S   
E8C0 @08C0   8D 66            BSR   NEGX   
E8C2 @08C2   35 10  TERM06:   PULS   X   
E8C4 @08C4   20 B1            BRA   TERM03   
E8C6 @08C6   30 01  TERM07:   LEAX   1,X   
E8C8 @08C8   8D 1B            BSR   FACT   
E8CA @08CA   34 04  MULT:     PSHS   B   
E8CC @08CC   E6 62            LDB   2,S   
E8CE @08CE   3D               MUL      
E8CF @08CF   A6 61            LDA   1,S   
E8D1 @08D1   E7 61            STB   1,S   
E8D3 @08D3   E6 60            LDB   0,S   
E8D5 @08D5   3D               MUL      
E8D6 @08D6   A6 62            LDA   2,S   
E8D8 @08D8   E7 62            STB   2,S   
E8DA @08DA   35 04            PULS   B   
E8DC @08DC   3D               MUL      
E8DD @08DD   AB 60            ADDA   0,S   
E8DF @08DF   AB 61            ADDA   1,S   
E8E1 @08E1   ED 60            STD   0,S   
E8E3 @08E3   20 92            BRA   TERM03   
E8E5 @08E5                       ;******************************
E8E5 @08E5                       ;******************************
E8E5 @08E5   BD E6 8B FACT:   JSR   TSTVAR   
E8E8 @08E8   25 09            BCS   FACT03   
E8EA @08EA   34 10            PSHS   X   
E8EC @08EC   1F 01            TFR   D,X   
E8EE @08EE   EC 00            LDD   0,X   
E8F0 @08F0   35 10            PULS   X   
E8F2 @08F2   39     FACT02:   RTS      
E8F3 @08F3   BD E6 EA FACT03:   JSR   TSTNBR   
E8F6 @08F6   24 FA            BCC   FACT02   
E8F8 @08F8   BD E7 9E         JSR   TSTFUN   
E8FB @08FB   24 F5            BCC   FACT02   
E8FD @08FD   8D 11  PAREXP:   BSR   ARGONE   
E8FF @08FF   34 02            PSHS   A   
E901 @0901   BD E6 5B         JSR   SKIPSP   
E904 @0904   81 29            CMPA   #")"   
E906 @0906   35 02            PULS   A   
E908 @0908   26 03            BNE   FACT05   
E90A @090A   30 01            LEAX   1,X   
E90C @090C   39               RTS      
E90D @090D   7E E5 56 FACT05:   JMP   ERRORS   
E910 @0910                       ;******************************
E910 @0910                       ;******************************
E910 @0910   BD E7 62 ARGONE:   JSR   TSTSTK   
E913 @0913   24 03            BCC   FACT04   
E915 @0915   7E E5 4E         JMP   ERRORF   
E918 @0918   BD E6 5B FACT04:   JSR   SKIPSP   
E91B @091B   81 28            CMPA   #"("   
E91D @091D   26 EE            BNE   FACT05   
E91F @091F   30 01            LEAX   1,X   
E921 @0921   7E E8 43         JMP   EXPR   
E924 @0924                       ;******************************
E924 @0924                       ;******************************
E924 @0924   6D 00  ABSX:     TST   0,X   
E926 @0926   2A 08            BPL   NEG05   
E928 @0928   60 00  NEGX:     NEG   0,X   
E92A @092A   60 01            NEG   1,X   
E92C @092C   24 02            BCC   NEG05   
E92E @092E   6A 00            DEC   0,X   
E930 @0930   39     NEG05:    RTS      
E931 @0931                       ;******************************
E931 @0931                       ;******************************
E931 @0931   34 02  TSTEOL:   PSHS   A   
E933 @0933   BD E6 5B         JSR   SKIPSP   
E936 @0936   81 04            CMPA   #EOL   
E938 @0938   27 03            BEQ   TEOL03   
E93A @093A   7E E5 56         JMP   ERRORS   
E93D @093D   30 01  TEOL03:   LEAX   1,X   
E93F @093F   35 02            PULS   A   
E941 @0941   39               RTS      
E942 @0942                       ;******************************
E942 @0942                       ;******************************
E942 @0942   BD E6 8B LET:    JSR   TSTVAR   
E945 @0945   24 03            BCC   LET03   
E947 @0947   7E E5 56         JMP   ERRORS   
E94A @094A   34 06  LET03:    PSHS   D   
E94C @094C   BD E6 5B         JSR   SKIPSP   
E94F @094F   81 3D            CMPA   #"="   
E951 @0951   27 03            BEQ   LET05   
E953 @0953   7E E5 56         JMP   ERRORS   
E956 @0956   30 01  LET05:    LEAX   1,X   
E958 @0958   BD E8 43         JSR   EXPR   
E95B @095B   8D D4            BSR   TSTEOL   
E95D @095D   9F 12            STX   CURSOR   
E95F @095F   35 10            PULS   X   
E961 @0961   ED 00            STD   0,X   
E963 @0963   9E 12            LDX   CURSOR   
E965 @0965   7E E5 FC         JMP   ENDS02   
E968 @0968                       ;******************************
E968 @0968                       ;******************************
E968 @0968   BD E7 EC IF:     JSR   RELEXP   
E96B @096B   5D               TSTB      
E96C @096C   27 03            BEQ   IF03   
E96E @096E   7E E6 0D         JMP   MSLINE   
E971 @0971   7E E5 F3 IF03:   JMP   REM   
E974 @0974                       ;******************************
E974 @0974                       ;******************************
E974 @0974   BD E8 43 GOTO:   JSR   EXPR   
E977 @0977   8D B8            BSR   TSTEOL   
E979 @0979   BD E7 C2         JSR   FLINE   
E97C @097C   25 0F            BCS   GOSB04   
E97E @097E   7E E6 09         JMP   NXTLIN   
E981 @0981                       ;******************************
E981 @0981                       ;******************************
E981 @0981   BD E8 43 GOSUB:   JSR   EXPR   
E984 @0984   8D AB            BSR   TSTEOL   
E986 @0986   9F 12            STX   CURSOR   
E988 @0988   BD E7 C2         JSR   FLINE   
E98B @098B   24 03            BCC   GOSB03   
E98D @098D   7E E5 5F GOSB04:   JMP   ERRORR   
E990 @0990   BD E7 62 GOSB03:   JSR   TSTSTK   
E993 @0993   24 03            BCC   GOSB05   
E995 @0995   7E E5 4E         JMP   ERRORF   
E998 @0998   DC 12  GOSB05:   LDD   CURSOR   
E99A @099A   34 06            PSHS   D   
E99C @099C   DC 16            LDD   LINENB   
E99E @099E   34 06            PSHS   D   
E9A0 @09A0   BD E6 09         JSR   NXTLIN   
E9A3 @09A3   35 06            PULS   D   
E9A5 @09A5   DD 16            STD   LINENB   
E9A7 @09A7   35 10            PULS   X   
E9A9 @09A9   7E E5 FC         JMP   ENDS02   
E9AC @09AC                       ;******************************
E9AC @09AC                       ;******************************
E9AC @09AC          RETURN:   EQU   TSTEOL   
E9AC @09AC                       ;******************************
E9AC @09AC                       ;******************************
E9AC @09AC   BD E6 5B PRINT:   JSR   SKIPSP   
E9AF @09AF   81 2C  PR01:     CMPA   #","   
E9B1 @09B1   27 36            BEQ   PR05   
E9B3 @09B3   81 3B            CMPA   #";"   
E9B5 @09B5   27 3D            BEQ   PR07   
E9B7 @09B7   81 04            CMPA   #EOL   
E9B9 @09B9   27 25            BEQ   PR04   
E9BB @09BB   81 22            CMPA   #$22   
E9BD @09BD   26 06            BNE   PR02   
E9BF @09BF   30 01            LEAX   1,X   
E9C1 @09C1   8D 42            BSR   PRNTQS   
E9C3 @09C3   20 09            BRA   PR03   
E9C5 @09C5   BD E8 43 PR02:   JSR   EXPR   
E9C8 @09C8   34 10            PSHS   X   
E9CA @09CA   8D 47            BSR   PRNTN   
E9CC @09CC   35 10            PULS   X   
E9CE @09CE   BD E6 5B PR03:   JSR   SKIPSP   
E9D1 @09D1   81 2C            CMPA   #","   
E9D3 @09D3   27 14            BEQ   PR05   
E9D5 @09D5   81 3B            CMPA   #";"   
E9D7 @09D7   27 1B            BEQ   PR07   
E9D9 @09D9   81 04            CMPA   #EOL   
E9DB @09DB   27 03            BEQ   PR04   
E9DD @09DD   7E E5 56         JMP   ERRORS   
E9E0 @09E0   34 10  PR04:     PSHS   X   
E9E2 @09E2   BD E5 3F         JSR   CRLF   
E9E5 @09E5   35 10            PULS   X   
E9E7 @09E7   20 14            BRA   PR08   
E9E9 @09E9   C6 07  PR05:     LDB   #$7   
E9EB @09EB   86 20  PR06:     LDA   #SPACE   
E9ED @09ED   BD EB AA         JSR   PUTCHR   
E9F0 @09F0   D5 1C            BITB   ZONE   
E9F2 @09F2   26 F7            BNE   PR06   
E9F4 @09F4   30 01  PR07:     LEAX   1,X   
E9F6 @09F6   BD E6 5B         JSR   SKIPSP   
E9F9 @09F9   81 04            CMPA   #EOL   
E9FB @09FB   26 B2            BNE   PR01   
E9FD @09FD   30 01  PR08:     LEAX   1,X   
E9FF @09FF   7E E5 FC         JMP   ENDS02   
EA02 @0A02                       ;*
EA02 @0A02                       ;*
EA02 @0A02   BD EB AA PRQ01:   JSR   PUTCHR   
EA05 @0A05   A6 80  PRNTQS:   LDA   ,X+   
EA07 @0A07   81 04            CMPA   #EOL   
EA09 @0A09   26 03            BNE   PRQ03   
EA0B @0A0B   7E E5 56         JMP   ERRORS   
EA0E @0A0E   81 22  PRQ03:    CMPA   #$22   
EA10 @0A10   26 F0            BNE   PRQ01   
EA12 @0A12   39               RTS      
EA13 @0A13                       ;*
EA13 @0A13   4D     PRNTN:    TSTA      
EA14 @0A14   2A 0D            BPL   PRN03   
EA16 @0A16   40               NEGA      
EA17 @0A17   50               NEGB      
EA18 @0A18   82 00            SBCA   #0   
EA1A @0A1A   34 02            PSHS   A   
EA1C @0A1C   86 2D            LDA   #"-"   
EA1E @0A1E   BD EB AA         JSR   PUTCHR   
EA21 @0A21   35 02            PULS   A   
EA23 @0A23   8E EA 52 PRN03:   LDX   #PRNPT-2   
EA26 @0A26   30 02  PRN05:    LEAX   2,X   
EA28 @0A28   10 A3 00         CMPD   0,X   
EA2B @0A2B   24 05            BCC   PRN07   
EA2D @0A2D   8C EA 5C         CMPX   #PRNPTO   
EA30 @0A30   26 F4            BNE   PRN05   
EA32 @0A32   0F 1A  PRN07:    CLR   CHAR   
EA34 @0A34   10 A3 00 PRN09:   CMPD   0,X   
EA37 @0A37   25 06            BCS   PRN11   
EA39 @0A39   A3 00            SUBD   0,X   
EA3B @0A3B   0C 1A            INC   CHAR   
EA3D @0A3D   20 F5            BRA   PRN09   
EA3F @0A3F   34 02  PRN11:    PSHS   A   
EA41 @0A41   86 30            LDA   #"0"   
EA43 @0A43   9B 1A            ADDA   CHAR   
EA45 @0A45   BD EB AA         JSR   PUTCHR   
EA48 @0A48   35 02            PULS   A   
EA4A @0A4A   8C EA 5C         CMPX   #PRNPTO   
EA4D @0A4D   27 04            BEQ   PRN13   
EA4F @0A4F   30 02            LEAX   2,X   
EA51 @0A51   20 DF            BRA   PRN07   
EA53 @0A53   39     PRN13:    RTS      
EA54 @0A54   27 10  PRNPT:    FDB   10000   
EA56 @0A56   03 E8            FDB   1000   
EA58 @0A58   00 64            FDB   100   
EA5A @0A5A   00 0A            FDB   10   
EA5C @0A5C   00 01  PRNPTO:   FDB   1   
EA5E @0A5E                       ;*
EA5E @0A5E   8E EA 56 PRNT4:   LDX   #PRNPT+2   
EA61 @0A61   20 CF            BRA   PRN07   
EA63 @0A63                       ;******************************
EA63 @0A63                       ;******************************
EA63 @0A63   BD E6 8B INPUT:   JSR   TSTVAR   
EA66 @0A66   25 3C            BCS   IN11   
EA68 @0A68   34 06            PSHS   D   
EA6A @0A6A   9F 12            STX   CURSOR   
EA6C @0A6C   86 3F  IN03:     LDA   #"?"   
EA6E @0A6E   BD EB AA         JSR   PUTCHR   
EA71 @0A71   BD E5 90         JSR   GETLIN   
EA74 @0A74   BD E6 5B IN05:   JSR   SKIPSP   
EA77 @0A77   81 04            CMPA   #EOL   
EA79 @0A79   27 F1            BEQ   IN03   
EA7B @0A7B   BD E6 D6         JSR   TSTSNB   
EA7E @0A7E   24 0B            BCC   IN07   
EA80 @0A80   8E EA B8         LDX   #RMESS   
EA83 @0A83   BD E5 38         JSR   PUTSTR   
EA86 @0A86   BD E5 3F         JSR   CRLF   
EA89 @0A89   20 E1            BRA   IN03   
EA8B @0A8B   9F 18  IN07:     STX   SCRTCH   
EA8D @0A8D   35 10            PULS   X   
EA8F @0A8F   ED 00            STD   0,X   
EA91 @0A91   9E 12            LDX   CURSOR   
EA93 @0A93   BD E6 5B         JSR   SKIPSP   
EA96 @0A96   81 2C            CMPA   #","   
EA98 @0A98   27 03            BEQ   IN09   
EA9A @0A9A   7E E5 F9         JMP   ENDSMT   
EA9D @0A9D   30 01  IN09:     LEAX   1,X   
EA9F @0A9F   BD E6 8B         JSR   TSTVAR   
EAA2 @0AA2   24 03            BCC   IN13   
EAA4 @0AA4   7E E5 56 IN11:   JMP   ERRORS   
EAA7 @0AA7   34 06  IN13:     PSHS   D   
EAA9 @0AA9   34 10            PSHS   X   
EAAB @0AAB   9E 18            LDX   SCRTCH   
EAAD @0AAD   BD E6 5B         JSR   SKIPSP   
EAB0 @0AB0   81 2C            CMPA   #","   
EAB2 @0AB2   26 C0            BNE   IN05   
EAB4 @0AB4   30 01            LEAX   1,X   
EAB6 @0AB6   20 BC            BRA   IN05   
EAB8 @0AB8   52 45 2D 45 4E 54 45 52 RMESS:   DB   "RE-ENTER"   
EAC0 @0AC0   04               FCB   EOL   
EAC1 @0AC1                       ;******************************
EAC1 @0AC1                       ;******************************
EAC1 @0AC1   9E 10  RUN:      LDX   STKTOP   
EAC3 @0AC3   86 34            LDA   #52   
EAC5 @0AC5   6F 80  RUN01:    CLR   ,X+   
EAC7 @0AC7   4A               DECA      
EAC8 @0AC8   26 FB            BNE   RUN01   
EACA @0ACA   9E 0A            LDX   USRBAS   
EACC @0ACC   7E E6 02         JMP   REM05   
EACF @0ACF                       ;******************************
EACF @0ACF                       ;******************************
EACF @0ACF   BD E6 EA LIST:   JSR   TSTNBR   
EAD2 @0AD2   24 08            BCC   LIST03   
EAD4 @0AD4   4F               CLRA      
EAD5 @0AD5   5F               CLRB      
EAD6 @0AD6   DD 12            STD   CURSOR   
EAD8 @0AD8   86 7F            LDA   #$7F   
EADA @0ADA   20 17            BRA   LIST07   
EADC @0ADC   DD 12  LIST03:   STD   CURSOR   
EADE @0ADE   BD E6 5B         JSR   SKIPSP   
EAE1 @0AE1   81 2C            CMPA   #","   
EAE3 @0AE3   27 04            BEQ   LIST05   
EAE5 @0AE5   96 12            LDA   CURSOR   
EAE7 @0AE7   20 0A            BRA   LIST07   
EAE9 @0AE9   30 01  LIST05:   LEAX   1,X   
EAEB @0AEB   BD E6 EA         JSR   TSTNBR   
EAEE @0AEE   24 03            BCC   LIST07   
EAF0 @0AF0   7E E5 56         JMP   ERRORS   
EAF3 @0AF3   BD E9 31 LIST07:   JSR   TSTEOL   
EAF6 @0AF6   34 06            PSHS   D   
EAF8 @0AF8   DC 12            LDD   CURSOR   
EAFA @0AFA   9F 12            STX   CURSOR   
EAFC @0AFC   BD E7 C2         JSR   FLINE   
EAFF @0AFF   9C 0C  LIST09:   CMPX   USRTOP   
EB01 @0B01   27 28            BEQ   LIST10   
EB03 @0B03   35 06            PULS   D   
EB05 @0B05   10 A3 00         CMPD   0,X   
EB08 @0B08   25 28            BCS   LIST11   
EB0A @0B0A   34 06            PSHS   D   
EB0C @0B0C   EC 81            LDD   ,X++   
EB0E @0B0E   34 10            PSHS   X   
EB10 @0B10   BD EA 5E         JSR   PRNT4   
EB13 @0B13   35 10            PULS   X   
EB15 @0B15   86 20            LDA   #SPACE   
EB17 @0B17   BD EB AA         JSR   PUTCHR   
EB1A @0B1A   BD E5 38         JSR   PUTSTR   
EB1D @0B1D   30 01            LEAX   1,X   
EB1F @0B1F   34 10            PSHS   X   
EB21 @0B21   BD E5 3F         JSR   CRLF   
EB24 @0B24   35 10            PULS   X   
EB26 @0B26   BD EB 9C         JSR   TSTBRK   
EB29 @0B29   20 D4            BRA   LIST09   
EB2B @0B2B   32 62  LIST10:   LEAS   2,S   
EB2D @0B2D   86 03            LDA   #ETX   
EB2F @0B2F   BD EB AA         JSR   PUTCHR   
EB32 @0B32   9E 12  LIST11:   LDX   CURSOR   
EB34 @0B34   7E E5 FC         JMP   ENDS02   
EB37 @0B37                       ;******************************
EB37 @0B37                       ;******************************
EB37 @0B37   4C 45 54 VERBT:   DB   "LET"   
EB3A @0B3A   04               FCB   EOL   
EB3B @0B3B   E9 42            FDB   LET   
EB3D @0B3D   49 46            DB   "IF"   
EB3F @0B3F   04               FCB   EOL   
EB40 @0B40   E9 68            FDB   IF   
EB42 @0B42   47 4F 54 4F      DB   "GOTO"   
EB46 @0B46   04               FCB   EOL   
EB47 @0B47   E9 74            FDB   GOTO   
EB49 @0B49   47 4F 53 55 42   DB   "GOSUB"   
EB4E @0B4E   04               FCB   EOL   
EB4F @0B4F   E9 81            FDB   GOSUB   
EB51 @0B51   52 45 54 55 52 4E DB   "RETURN"   
EB57 @0B57   04               FCB   EOL   
EB58 @0B58   E9 31            FDB   RETURN   
EB5A @0B5A   50 4F 4B 45      DB   "POKE"   
EB5E @0B5E   04               FCB   EOL   
EB5F @0B5F   E7 7C            FDB   POKE   
EB61 @0B61   50 52 49 4E 54   DB   "PRINT"   
EB66 @0B66   04               FCB   EOL   
EB67 @0B67   E9 AC            FDB   PRINT   
EB69 @0B69   49 4E 50 55 54   DB   "INPUT"   
EB6E @0B6E   04               FCB   EOL   
EB6F @0B6F   EA 63            FDB   INPUT   
EB71 @0B71   52 45 4D         DB   "REM"   
EB74 @0B74   04               FCB   EOL   
EB75 @0B75   E5 F3            FDB   REM   
EB77 @0B77   53 54 4F 50      DB   "STOP"   
EB7B @0B7B   04               FCB   EOL   
EB7C @0B7C   EB E6            FDB   END   
EB7E @0B7E   45 4E 44         DB   "END"   
EB81 @0B81   04               FCB   EOL   
EB82 @0B82   EB E6            FDB   END   
EB84 @0B84   52 55 4E         DB   "RUN"   
EB87 @0B87   04               FCB   EOL   
EB88 @0B88   EA C1            FDB   RUN   
EB8A @0B8A   4C 49 53 54      DB   "LIST"   
EB8E @0B8E   04               FCB   EOL   
EB8F @0B8F   EA CF            FDB   LIST   
EB91 @0B91   4E 45 57         DB   "NEW"   
EB94 @0B94   04               FCB   EOL   
EB95 @0B95   E4 1F            FDB   CLEAR   
EB97 @0B97   3F               DB   "?"   
EB98 @0B98   04               FCB   EOL   
EB99 @0B99   E9 AC            FDB   PRINT   
EB9B @0B9B   04               FCB   EOL   
EB9C @0B9C                       ;******************************
EB9C @0B9C                       ;******************************
EB9C @0B9C   8D 2A  TSTBRK:   BSR   BRKEEE   
EB9E @0B9E   27 09            BEQ   GETC05   
EBA0 @0BA0   8D 0D  GETCHR:   BSR   INEEE   
EBA2 @0BA2   81 03            CMPA   #ETX   
EBA4 @0BA4   26 03            BNE   GETC05   
EBA6 @0BA6   7E E5 67         JMP   BREAK   
EBA9 @0BA9   39     GETC05:   RTS      
EBAA @0BAA   0C 1C  PUTCHR:   INC   ZONE   
EBAC @0BAC   7E EB B9         JMP   OUTEEE   
EBAF @0BAF                       ;******************************
EBAF @0BAF                       ;******************************
EBAF @0BAF   8D 17  INEEE:    BSR   BRKEEE   
EBB1 @0BB1   27 FC            BEQ   INEEE   
EBB3 @0BB3   B6 83 FF         LDA   RECEV   
EBB6 @0BB6   84 7F            ANDA   #$7F   
EBB8 @0BB8   39               RTS      
EBB9 @0BB9   34 02  OUTEEE:   PSHS   A   
EBBB @0BBB   B6 83 FE OUT01:   LDA   TRCS   
EBBE @0BBE   85 02            BITA   #TDRE   
EBC0 @0BC0   27 F9            BEQ   OUT01   
EBC2 @0BC2   35 02            PULS   A   
EBC4 @0BC4   B7 83 FF         STA   TRANS   
EBC7 @0BC7   39               RTS      
EBC8 @0BC8   34 02  BRKEEE:   PSHS   A   
EBCA @0BCA   B6 83 FE BRK03:   LDA   TRCS   
EBCD @0BCD   85 20            BITA   #ORFE   
EBCF @0BCF   27 05            BEQ   BRK05   
EBD1 @0BD1   B6 83 FF         LDA   RECEV   
EBD4 @0BD4   20 F4            BRA   BRK03   
EBD6 @0BD6   85 01  BRK05:    BITA   #RDRF   
EBD8 @0BD8   35 02            PULS   A   
EBDA @0BDA   39               RTS      
EBDB @0BDB                       ;*
EBDB @0BDB   86 03            LDA   #CNTL1   
EBDD @0BDD   B7 83 FE         STA   RMCR   
EBE0 @0BE0   86 15            LDA   #CNTL2   
EBE2 @0BE2   B7 83 FE         STA   TRCS   
EBE5 @0BE5          INTEEE:   EQU   $   
EBE5 @0BE5   39               RTS      
EBE6 @0BE6                       ; 
EBE6 @0BE6                       ; 
EBE6 @0BE6                       ; 
EBE6 @0BE6                       ;******************************
EBE6 @0BE6                       ;******************************
EBE6 @0BE6          END:         
EBE6 @0BE6                       ; 
EBE6 @0BE6                       ; 
EBE6 @0BE6                       ; 
EBE6 @0BE6                       ; 
EBE6 @0BE6                       ; KILO ROM Module
EBE6 @0BE6                       ; Needs these instructions on the begin:
EBE6 @0BE6                    .CSEG      
EBE6 @0BE6                    ALIGN   256   
EC00 @0C00   7E EC 10         JMP   flipflop   ; Jump to the begin
EC03 @0C03                       ; 
EC03 @0C03                       ; Needed signature: MOD9 + module name + trailing zero
EC03 @0C03   4D 4F 44 39 46 6C 69 70 46 6C 6F 70 00 .CSTR   "MOD9FlipFlop"   
EC10 @0C10                       ; 
EC10 @0C10                       ; Monitor vectors:
EC10 @0C10                       ;MRESET      EQU     $E000 
EC10 @0C10                       ;MSERIN      EQU     $E003 
EC10 @0C10                       ;MSEROUT     EQU     $E006 
EC10 @0C10                       ;MPRINT2     EQU     $E009 
EC10 @0C10                       ;MPRINTX     EQU     $E00C 
EC10 @0C10                       ;MPRIMM      EQU     $E00F 
EC10 @0C10                       ; 
EC10 @0C10                       ; here are your space:
EC10 @0C10          FLIPFLOP:      
EC10 @0C10   BD E0 0F         JSR   MPRIMM   
EC13 @0C13   46 6C 69 70 20 46 6C 6F 70 0D 0A 00 .CSTR   "Flip Flop",$0d,$0a   
EC1F @0C1F                       ; 
EC1F @0C1F                       ; It just set some bits up and some down
EC1F @0C1F                       ; 
EC1F @0C1F   7E EC 22         JMP   flip   
EC22 @0C22                       ; 
EC22 @0C22                       ; Set bit pattern
EC22 @0C22          FLIP:        
EC22 @0C22   86 AA            LDA   #$AA   
EC24 @0C24   B7 93 FC         STA   PORTA   
EC27 @0C27   B7 93 FE         STA   PORTB   
EC2A @0C2A   BD EC 3E         JSR   qtrscd   
EC2D @0C2D   7E EC 30         JMP   flop   
EC30 @0C30                       ; 
EC30 @0C30          FLOP:        
EC30 @0C30   86 55            LDA   #$55   
EC32 @0C32   B7 93 FC         STA   PORTA   
EC35 @0C35   B7 93 FE         STA   PORTB   
EC38 @0C38   BD EC 3E         JSR   qtrscd   
EC3B @0C3B   7E EC 22         JMP   flip   
EC3E @0C3E                       ; 
EC3E @0C3E   86 FA  QTRSCD:   LDA   #250   ; 250 MILLISECONDS (FA HEX)
EC40 @0C40   BD EC 47         JSR   DELAY   
EC43 @0C43   5A               DECB      
EC44 @0C44   26 F8            BNE   QTRSCD   ; CONTINUE UNTIL DONE
EC46 @0C46   39               RTS      
EC47 @0C47                       ; 
EC47 @0C47                       ; Cycles Per Millisecond - User Supplied
EC47 @0C47                       ; 
EC47 @0C47          CPMS:     EQU   2000   ; 1000 = 1 MHz Clock
EC47 @0C47                       ; 2000 = 2 MHz Clock
EC47 @0C47          MFAC:     EQU   CPMS/20   ; Multiply factor for all
EC47 @0C47                       ; except last millisecond
EC47 @0C47          MFACM:    EQU   MFAC-4   ; Multiplying factor for last
EC47 @0C47                       ; millisecond
EC47 @0C47          DELAY:       
EC47 @0C47                       ; Do all but the last millisecond
EC47 @0C47                       ; 
EC47 @0C47   34 16            PSHS   D,X   ; save registers to stack
EC49 @0C49   C6 64            LDB   #MFAC   ; Get multiplying factor
EC4B @0C4B   4A               DECA      ; Reduce number of ms by 1
EC4C @0C4C   3D               MUL      ; Multiply factor times ms
EC4D @0C4D   1F 02            TFR   D,Y   ; Transfer loop count to X
EC4F @0C4F   BD EC 5E         JSR   DLY   
EC52 @0C52                       ; Account for 80 ms overhead delay by reducing last ms's count
EC52 @0C52                       ; 
EC52 @0C52   8E 00 64         LDX   #MFAC   ; Get reduced count
EC55 @0C55   BD EC 5E         JSR   DLY   ; Delay last millisecond
EC58 @0C58   35 16            PULS   D,X   ; Restore registers
EC5A @0C5A   39               RTS      
EC5B @0C5B                       ; 
EC5B @0C5B                       ; ROUTINE:          DLY
EC5B @0C5B                       ; PURPOSE:          DELAY ROUTING
EC5B @0C5B                       ; ENTRY:            REGISTER X = COUNT
EC5B @0C5B                       ; EXIT:             REGISTER X = 0
EC5B @0C5B                       ; REGISETERS USED:  X
EC5B @0C5B   8E 00 64         LDX   #MFAC   
EC5E @0C5E   20 00  DLY:      BRA   DLY1   
EC60 @0C60   20 00  DLY1:     BRA   DLY2   
EC62 @0C62   20 00  DLY2:     BRA   DLY3   
EC64 @0C64   20 00  DLY3:     BRA   DLY4   
EC66 @0C66   30 1F  DLY4:     LEAX   -1,X   
EC68 @0C68   26 F4            BNE   DLY   
EC6A @0C6A   39               RTS      
EC6B @0C6B                       ; 
EC6B @0C6B                       ; KILO ROM Module
EC6B @0C6B                       ; Needs these instructions on the begin:
EC6B @0C6B                    .CSEG      
EC6B @0C6B                    ALIGN   256   
ED00 @0D00   7E ED 0F         JMP   testmod   ; Jump to the begin
ED03 @0D03                       ; 
ED03 @0D03                       ; Needed signature: MOD9 + module name + trailing zero
ED03 @0D03   4D 4F 44 39 54 65 73 74 4D 6F 64 00 .CSTR   "MOD9TestMod"   
ED0F @0D0F                       ; 
ED0F @0D0F                       ; Monitor vectors:
ED0F @0D0F                       ;MRESET      EQU     $E000 
ED0F @0D0F                       ;MSERIN      EQU     $E003 
ED0F @0D0F                       ;MSEROUT     EQU     $E006 
ED0F @0D0F                       ;MPRINT2     EQU     $E009 
ED0F @0D0F                       ;MPRINTX     EQU     $E00C 
ED0F @0D0F                       ;MPRIMM      EQU     $E00F 
ED0F @0D0F                       ; 
ED0F @0D0F                       ; here are your space:
ED0F @0D0F          TESTMOD:      
ED0F @0D0F   BD E0 0F         JSR   MPRIMM   
ED12 @0D12   54 65 73 74 20 6D 6F 64 75 6C 65 0D 0A 00 .CSTR   "Test module",$0d,$0a   
ED20 @0D20   7E E0 00         JMP   MRESET   
ED23 @0D23                       ; 
FFF0 @1FF0                    .ORG   0xfff0   
FFF0 @1FF0                       ;reserved
FFF0 @1FF0   E0 12            DW   reset   
FFF2 @1FF2                       ;SWI3
FFF2 @1FF2   E0 12            DW   reset   
FFF4 @1FF4                       ;SWI2
FFF4 @1FF4   E0 12            DW   reset   
FFF6 @1FF6                       ;FIRQ
FFF6 @1FF6   E0 12            DW   reset   
FFF8 @1FF8                       ;IRQ
FFF8 @1FF8   E0 12            DW   reset   
FFFA @1FFA                       ;SWI
FFFA @1FFA   E0 12            DW   reset   
FFFC @1FFC                       ;NMI
FFFC @1FFC   E0 12            DW   reset   
FFFE @1FFE                       ;RES
FFFE @1FFE   E0 12            DW   reset   
10000 @2000                      ; 


Q_ADD:              0000 DEFINED AT LINE 23
                    > USED AT LINE 169
                    > USED AT LINE 176
                    > USED AT LINE 187
                    > USED AT LINE 191
                    > USED AT LINE 199
                    > USED AT LINE 332
                    > USED AT LINE 337
                    > USED AT LINE 461
                    > USED AT LINE 470
                    > USED AT LINE 471
                    > USED AT LINE 472
                    > USED AT LINE 473
                    > USED AT LINE 474
                    > USED AT LINE 475
                    > USED AT LINE 476
                    > USED AT LINE 477
                    > USED AT LINE 478
                    > USED AT LINE 479
Q_KEY:              0002 DEFINED AT LINE 24
                    > USED AT LINE 491
                    > USED AT LINE 493
Q_HEXCNT:           0003 DEFINED AT LINE 25
                    > USED AT LINE 139
                    > USED AT LINE 149
                    > USED AT LINE 352
                    > USED AT LINE 366
                    > USED AT LINE 372
                    > USED AT LINE 380
                    > USED AT LINE 394
                    > USED AT LINE 401
                    > USED AT LINE 409
Q_HEXADD:           0004 DEFINED AT LINE 26
                    > USED AT LINE 141
                    > USED AT LINE 333
                    > USED AT LINE 341
                    > USED AT LINE 345
                    > USED AT LINE 354
                    > USED AT LINE 357
                    > USED AT LINE 368
                    > USED AT LINE 373
                    > USED AT LINE 374
                    > USED AT LINE 382
                    > USED AT LINE 397
                    > USED AT LINE 402
                    > USED AT LINE 403
                    > USED AT LINE 411
Q_HEXADD2:          0006 DEFINED AT LINE 27
                    > USED AT LINE 338
                    > USED AT LINE 342
                    > USED AT LINE 344
                    > USED AT LINE 355
                    > USED AT LINE 358
Q_SUBR:             0008 DEFINED AT LINE 28
                    > USED AT LINE 311
                    > USED AT LINE 320
ACIA:               83FE DEFINED AT LINE 39
                    > USED AT LINE 40
                    > USED AT LINE 41
                    > USED AT LINE 42
ACIAC:              83FE DEFINED AT LINE 40
                    > USED AT LINE 82
                    > USED AT LINE 84
ACIAS:              83FE DEFINED AT LINE 41
                    > USED AT LINE 550
                    > USED AT LINE 591
ACIAD:              83FF DEFINED AT LINE 42
                    > USED AT LINE 553
                    > USED AT LINE 594
ACIA_TDRE:          0002 DEFINED AT LINE 43
ACIA_RDRF:          0001 DEFINED AT LINE 44
PIA:                9000 DEFINED AT LINE 47
                    > USED AT LINE 49
                    > USED AT LINE 51
                    > USED AT LINE 52
                    > USED AT LINE 54
PORTA:              93FC DEFINED AT LINE 49
                    > USED AT LINE 50
                    > USED AT LINE 30 IN flipflop.a09
                    > USED AT LINE 37 IN flipflop.a09
DDRA:               93FC DEFINED AT LINE 50
                    > USED AT LINE 91
CRA:                93FD DEFINED AT LINE 51
                    > USED AT LINE 88
                    > USED AT LINE 94
PORTB:              93FE DEFINED AT LINE 52
                    > USED AT LINE 53
                    > USED AT LINE 31 IN flipflop.a09
                    > USED AT LINE 38 IN flipflop.a09
DDRB:               93FE DEFINED AT LINE 53
                    > USED AT LINE 92
CRB:                93FF DEFINED AT LINE 54
                    > USED AT LINE 89
                    > USED AT LINE 95
MRESET:             E000 DEFINED AT LINE 63
                    > USED AT LINE 22 IN testmod.a09
MSERIN:             E003 DEFINED AT LINE 64
MSEROUT:            E006 DEFINED AT LINE 65
MPRINT2:            E009 DEFINED AT LINE 66
MPRINTX:            E00C DEFINED AT LINE 67
MPRIMM:             E00F DEFINED AT LINE 68
                    > USED AT LINE 20 IN flipflop.a09
                    > USED AT LINE 20 IN testmod.a09
RESET:              E012 DEFINED AT LINE 76
                    > USED AT LINE 70
                    > USED AT LINE 612
                    > USED AT LINE 614
                    > USED AT LINE 616
                    > USED AT LINE 618
                    > USED AT LINE 620
                    > USED AT LINE 622
                    > USED AT LINE 624
                    > USED AT LINE 626
WARM:               E03E DEFINED AT LINE 101
MAINCRLF:           E051 DEFINED AT LINE 104
                    > USED AT LINE 135
                    > USED AT LINE 164
                    > USED AT LINE 182
MAIN:               E054 DEFINED AT LINE 106
                    > USED AT LINE 156
                    > USED AT LINE 219
                    > USED AT LINE 281
                    > USED AT LINE 283
                    > USED AT LINE 285
                    > USED AT LINE 316
                    > USED AT LINE 325
MAINSHORT:          E057 DEFINED AT LINE 108
                    > USED AT LINE 113
                    > USED AT LINE 115
WHAT:               E08C DEFINED AT LINE 132
M_HEX:              E098 DEFINED AT LINE 137
                    > USED AT LINE 111
                    > USED AT LINE 160
M_HEX_LOOP:         E0A9 DEFINED AT LINE 145
                    > USED AT LINE 150
M_HEX_WAITEND:      E0B7 DEFINED AT LINE 153
                    > USED AT LINE 158
                    > USED AT LINE 161
M_HEXEND:           E0C8 DEFINED AT LINE 162
                    > USED AT LINE 144
M_MEM:              E0CA DEFINED AT LINE 167
                    > USED AT LINE 120
M_MEM_LINE:         E0CF DEFINED AT LINE 170
                    > USED AT LINE 186
                    > USED AT LINE 189
                    > USED AT LINE 194
M_MEM_BACK:         E100 DEFINED AT LINE 190
                    > USED AT LINE 184
M_DUMP:             E109 DEFINED AT LINE 197
                    > USED AT LINE 122
M_DUMP_LINE:        E111 DEFINED AT LINE 201
                    > USED AT LINE 217
                    > USED AT LINE 223
M_DUMP_LOOP:        E11C DEFINED AT LINE 206
                    > USED AT LINE 212
M_DUMP_WAIT:        E12C DEFINED AT LINE 214
                    > USED AT LINE 221
M_GO:               E143 DEFINED AT LINE 225
                    > USED AT LINE 124
M_U_FNEXT:          E14A DEFINED AT LINE 229
                    > USED AT LINE 254
                    > USED AT LINE 295
M_U_FNEXT_E:        E160 DEFINED AT LINE 241
                    > USED AT LINE 232
                    > USED AT LINE 235
                    > USED AT LINE 238
M_USER:             E161 DEFINED AT LINE 244
                    > USED AT LINE 126
M_U_FIND:           E184 DEFINED AT LINE 253
                    > USED AT LINE 273
M_U_NEXT:           E1AA DEFINED AT LINE 271
                    > USED AT LINE 255
M_U_SEL:            E1CA DEFINED AT LINE 278
                    > USED AT LINE 303
M_U_SELF:           E1EC DEFINED AT LINE 294
                    > USED AT LINE 302
M_U_SELN:           E1F6 DEFINED AT LINE 300
                    > USED AT LINE 296
M_U_FOUND:          E1FF DEFINED AT LINE 304
                    > USED AT LINE 298
M_WRITEHEX:         E202 DEFINED AT LINE 309
                    > USED AT LINE 130
M_WRITESREC:        E21E DEFINED AT LINE 318
                    > USED AT LINE 128
M_WRBODY:           E239 DEFINED AT LINE 328
                    > USED AT LINE 312
                    > USED AT LINE 321
M_WHL:              E25C DEFINED AT LINE 340
                    > USED AT LINE 356
                    > USED AT LINE 359
M_WH10:             E26C DEFINED AT LINE 349
                    > USED AT LINE 343
M_WHX:              E26E DEFINED AT LINE 351
                    > USED AT LINE 348
M_WHEND:            E280 DEFINED AT LINE 360
                    > USED AT LINE 346
M_WHEXLINE:         E281 DEFINED AT LINE 363
MWHLOOP:            E29B DEFINED AT LINE 376
                    > USED AT LINE 381
M_WSLINE:           E2B2 DEFINED AT LINE 389
MWSLOOP:            E2D5 DEFINED AT LINE 405
                    > USED AT LINE 410
PRINTX:             E2EC DEFINED AT LINE 424
                    > USED AT LINE 74
                    > USED AT LINE 172
                    > USED AT LINE 202
                    > USED AT LINE 369
                    > USED AT LINE 398
PRINT2:             E2F3 DEFINED AT LINE 431
                    > USED AT LINE 73
                    > USED AT LINE 177
                    > USED AT LINE 208
                    > USED AT LINE 367
                    > USED AT LINE 371
                    > USED AT LINE 379
                    > USED AT LINE 385
                    > USED AT LINE 396
                    > USED AT LINE 400
                    > USED AT LINE 408
                    > USED AT LINE 414
                    > USED AT LINE 426
PRINTHEX:           E300 DEFINED AT LINE 441
                    > USED AT LINE 437
                    > USED AT LINE 468
PH2:                E309 DEFINED AT LINE 446
                    > USED AT LINE 443
GETADDR:            E30E DEFINED AT LINE 451
                    > USED AT LINE 168
                    > USED AT LINE 198
                    > USED AT LINE 226
GET4:               E317 DEFINED AT LINE 459
                    > USED AT LINE 331
                    > USED AT LINE 336
GET4X:              E31C DEFINED AT LINE 462
                    > USED AT LINE 180
                    > USED AT LINE 481
GET4OK:             E322 DEFINED AT LINE 466
                    > USED AT LINE 464
GETHEX2:            E33F DEFINED AT LINE 485
                    > USED AT LINE 138
                    > USED AT LINE 142
                    > USED AT LINE 146
                    > USED AT LINE 499
                    > USED AT LINE 501
GETHEX4:            E34E DEFINED AT LINE 498
                    > USED AT LINE 140
GETHEX:             E35D DEFINED AT LINE 507
                    > USED AT LINE 463
                    > USED AT LINE 486
                    > USED AT LINE 492
GHB:                E364 DEFINED AT LINE 511
                    > USED AT LINE 521
                    > USED AT LINE 528
                    > USED AT LINE 530
GH1:                E367 DEFINED AT LINE 514
                    > USED AT LINE 510
GH2:                E36E DEFINED AT LINE 519
                    > USED AT LINE 516
GH3:                E379 DEFINED AT LINE 526
                    > USED AT LINE 523
STROUT:             E384 DEFINED AT LINE 537
                    > USED AT LINE 268
                    > USED AT LINE 543
SOUT2:              E389 DEFINED AT LINE 541
                    > USED AT LINE 539
SEROUT:             E38F DEFINED AT LINE 547
                    > USED AT LINE 72
                    > USED AT LINE 152
                    > USED AT LINE 210
                    > USED AT LINE 258
                    > USED AT LINE 260
                    > USED AT LINE 263
                    > USED AT LINE 265
                    > USED AT LINE 365
                    > USED AT LINE 391
                    > USED AT LINE 393
                    > USED AT LINE 445
                    > USED AT LINE 448
                    > USED AT LINE 542
                    > USED AT LINE 560
                    > USED AT LINE 562
                    > USED AT LINE 567
                    > USED AT LINE 569
                    > USED AT LINE 585
SEROUTL:            E391 DEFINED AT LINE 549
                    > USED AT LINE 552
PCRLF:              E39E DEFINED AT LINE 558
                    > USED AT LINE 105
                    > USED AT LINE 171
                    > USED AT LINE 200
                    > USED AT LINE 213
                    > USED AT LINE 269
                    > USED AT LINE 339
                    > USED AT LINE 386
                    > USED AT LINE 415
PROMPT:             E3A8 DEFINED AT LINE 565
                    > USED AT LINE 107
PRIMM:              E3B2 DEFINED AT LINE 576
                    > USED AT LINE 75
                    > USED AT LINE 102
                    > USED AT LINE 133
                    > USED AT LINE 173
                    > USED AT LINE 178
                    > USED AT LINE 203
                    > USED AT LINE 245
                    > USED AT LINE 275
                    > USED AT LINE 314
                    > USED AT LINE 323
                    > USED AT LINE 329
                    > USED AT LINE 334
                    > USED AT LINE 452
PRIMM1:             E3B6 DEFINED AT LINE 579
                    > USED AT LINE 586
PRIMM2:             E3BE DEFINED AT LINE 584
                    > USED AT LINE 581
SERIN:              E3C3 DEFINED AT LINE 590
                    > USED AT LINE 71
                    > USED AT LINE 109
                    > USED AT LINE 154
                    > USED AT LINE 215
                    > USED AT LINE 279
                    > USED AT LINE 508
                    > USED AT LINE 593
MON_END:            E3CE DEFINED AT LINE 597
EOL:                0004 DEFINED AT LINE 18 IN basic.a09
                    > USED AT LINE 127 IN basic.a09
                    > USED AT LINE 232 IN basic.a09
                    > USED AT LINE 235 IN basic.a09
                    > USED AT LINE 238 IN basic.a09
                    > USED AT LINE 241 IN basic.a09
                    > USED AT LINE 244 IN basic.a09
                    > USED AT LINE 560 IN basic.a09
                    > USED AT LINE 563 IN basic.a09
                    > USED AT LINE 566 IN basic.a09
                    > USED AT LINE 568 IN basic.a09
                    > USED AT LINE 966 IN basic.a09
                    > USED AT LINE 1027 IN basic.a09
                    > USED AT LINE 1030 IN basic.a09
                    > USED AT LINE 1033 IN basic.a09
                    > USED AT LINE 1036 IN basic.a09
                    > USED AT LINE 1039 IN basic.a09
                    > USED AT LINE 1042 IN basic.a09
                    > USED AT LINE 1045 IN basic.a09
                    > USED AT LINE 1048 IN basic.a09
                    > USED AT LINE 1051 IN basic.a09
                    > USED AT LINE 1054 IN basic.a09
                    > USED AT LINE 1057 IN basic.a09
                    > USED AT LINE 1060 IN basic.a09
                    > USED AT LINE 1063 IN basic.a09
                    > USED AT LINE 1066 IN basic.a09
                    > USED AT LINE 1069 IN basic.a09
                    > USED AT LINE 1071 IN basic.a09
ETX:                0003 DEFINED AT LINE 19 IN basic.a09
SPACE:              0020 DEFINED AT LINE 20 IN basic.a09
CR:                 000D DEFINED AT LINE 21 IN basic.a09
                    > USED AT LINE 227 IN basic.a09
LF:                 000A DEFINED AT LINE 22 IN basic.a09
                    > USED AT LINE 227 IN basic.a09
BS:                 0008 DEFINED AT LINE 23 IN basic.a09
CAN:                0018 DEFINED AT LINE 24 IN basic.a09
BELL:               0007 DEFINED AT LINE 25 IN basic.a09
FILL:               0000 DEFINED AT LINE 26 IN basic.a09
DEL:                007F DEFINED AT LINE 27 IN basic.a09
BSIZE:              0049 DEFINED AT LINE 28 IN basic.a09
                    > USED AT LINE 48 IN basic.a09
STKCUS:             0030 DEFINED AT LINE 29 IN basic.a09
BACIA:              83FE DEFINED AT LINE 31 IN basic.a09
                    > USED AT LINE 32 IN basic.a09
                    > USED AT LINE 33 IN basic.a09
                    > USED AT LINE 34 IN basic.a09
                    > USED AT LINE 35 IN basic.a09
RMCR:               83FE DEFINED AT LINE 32 IN basic.a09
                    > USED AT LINE 1108 IN basic.a09
TRCS:               83FE DEFINED AT LINE 33 IN basic.a09
                    > USED AT LINE 1091 IN basic.a09
                    > USED AT LINE 1098 IN basic.a09
                    > USED AT LINE 1110 IN basic.a09
RECEV:              83FF DEFINED AT LINE 34 IN basic.a09
                    > USED AT LINE 1087 IN basic.a09
                    > USED AT LINE 1101 IN basic.a09
TRANS:              83FF DEFINED AT LINE 35 IN basic.a09
                    > USED AT LINE 1095 IN basic.a09
CNTL1:              0003 DEFINED AT LINE 36 IN basic.a09
CNTL2:              0015 DEFINED AT LINE 37 IN basic.a09
RDRF:               0001 DEFINED AT LINE 38 IN basic.a09
ORFE:               0020 DEFINED AT LINE 39 IN basic.a09
TDRE:               0002 DEFINED AT LINE 40 IN basic.a09
LORAM:              0080 DEFINED AT LINE 43 IN basic.a09
BUFFER:             0200 DEFINED AT LINE 44 IN basic.a09
                    > USED AT LINE 48 IN basic.a09
                    > USED AT LINE 49 IN basic.a09
RAMSIZ:             2000 DEFINED AT LINE 45 IN basic.a09
                    > USED AT LINE 49 IN basic.a09
ROMADR:             F000 DEFINED AT LINE 46 IN basic.a09
RAMBEG:             0249 DEFINED AT LINE 48 IN basic.a09
RAMEND:             2200 DEFINED AT LINE 49 IN basic.a09
RAMPAT:             AA0F DEFINED AT LINE 51 IN basic.a09
ROMPAT:             F055 DEFINED AT LINE 52 IN basic.a09
USRBAS:             000A DEFINED AT LINE 56 IN basic.a09
                    > USED AT LINE 85 IN basic.a09
                    > USED AT LINE 94 IN basic.a09
                    > USED AT LINE 139 IN basic.a09
                    > USED AT LINE 571 IN basic.a09
                    > USED AT LINE 974 IN basic.a09
USRTOP:             000C DEFINED AT LINE 57 IN basic.a09
                    > USED AT LINE 86 IN basic.a09
                    > USED AT LINE 112 IN basic.a09
                    > USED AT LINE 135 IN basic.a09
                    > USED AT LINE 148 IN basic.a09
                    > USED AT LINE 158 IN basic.a09
                    > USED AT LINE 180 IN basic.a09
                    > USED AT LINE 182 IN basic.a09
                    > USED AT LINE 183 IN basic.a09
                    > USED AT LINE 187 IN basic.a09
                    > USED AT LINE 190 IN basic.a09
                    > USED AT LINE 313 IN basic.a09
                    > USED AT LINE 572 IN basic.a09
                    > USED AT LINE 1000 IN basic.a09
STKLIM:             000E DEFINED AT LINE 58 IN basic.a09
                    > USED AT LINE 87 IN basic.a09
                    > USED AT LINE 113 IN basic.a09
                    > USED AT LINE 159 IN basic.a09
                    > USED AT LINE 184 IN basic.a09
                    > USED AT LINE 188 IN basic.a09
                    > USED AT LINE 520 IN basic.a09
STKTOP:             0010 DEFINED AT LINE 59 IN basic.a09
                    > USED AT LINE 78 IN basic.a09
                    > USED AT LINE 82 IN basic.a09
                    > USED AT LINE 91 IN basic.a09
                    > USED AT LINE 406 IN basic.a09
                    > USED AT LINE 969 IN basic.a09
CURSOR:             0012 DEFINED AT LINE 60 IN basic.a09
                    > USED AT LINE 95 IN basic.a09
                    > USED AT LINE 134 IN basic.a09
                    > USED AT LINE 141 IN basic.a09
                    > USED AT LINE 193 IN basic.a09
                    > USED AT LINE 201 IN basic.a09
                    > USED AT LINE 327 IN basic.a09
                    > USED AT LINE 332 IN basic.a09
                    > USED AT LINE 336 IN basic.a09
                    > USED AT LINE 429 IN basic.a09
                    > USED AT LINE 431 IN basic.a09
                    > USED AT LINE 551 IN basic.a09
                    > USED AT LINE 794 IN basic.a09
                    > USED AT LINE 797 IN basic.a09
                    > USED AT LINE 817 IN basic.a09
                    > USED AT LINE 824 IN basic.a09
                    > USED AT LINE 932 IN basic.a09
                    > USED AT LINE 948 IN basic.a09
                    > USED AT LINE 982 IN basic.a09
                    > USED AT LINE 985 IN basic.a09
                    > USED AT LINE 989 IN basic.a09
                    > USED AT LINE 997 IN basic.a09
                    > USED AT LINE 998 IN basic.a09
                    > USED AT LINE 1022 IN basic.a09
SAVESP:             0014 DEFINED AT LINE 61 IN basic.a09
                    > USED AT LINE 143 IN basic.a09
                    > USED AT LINE 152 IN basic.a09
                    > USED AT LINE 154 IN basic.a09
                    > USED AT LINE 157 IN basic.a09
                    > USED AT LINE 191 IN basic.a09
                    > USED AT LINE 197 IN basic.a09
                    > USED AT LINE 517 IN basic.a09
                    > USED AT LINE 518 IN basic.a09
LINENB:             0016 DEFINED AT LINE 62 IN basic.a09
                    > USED AT LINE 97 IN basic.a09
                    > USED AT LINE 248 IN basic.a09
                    > USED AT LINE 310 IN basic.a09
                    > USED AT LINE 311 IN basic.a09
                    > USED AT LINE 317 IN basic.a09
                    > USED AT LINE 826 IN basic.a09
                    > USED AT LINE 830 IN basic.a09
SCRTCH:             0018 DEFINED AT LINE 63 IN basic.a09
                    > USED AT LINE 132 IN basic.a09
                    > USED AT LINE 160 IN basic.a09
                    > USED AT LINE 204 IN basic.a09
                    > USED AT LINE 206 IN basic.a09
                    > USED AT LINE 337 IN basic.a09
                    > USED AT LINE 338 IN basic.a09
                    > USED AT LINE 342 IN basic.a09
                    > USED AT LINE 349 IN basic.a09
                    > USED AT LINE 945 IN basic.a09
                    > USED AT LINE 959 IN basic.a09
CHAR:               001A DEFINED AT LINE 64 IN basic.a09
                    > USED AT LINE 151 IN basic.a09
                    > USED AT LINE 155 IN basic.a09
                    > USED AT LINE 181 IN basic.a09
                    > USED AT LINE 192 IN basic.a09
                    > USED AT LINE 196 IN basic.a09
                    > USED AT LINE 203 IN basic.a09
                    > USED AT LINE 207 IN basic.a09
                    > USED AT LINE 209 IN basic.a09
                    > USED AT LINE 335 IN basic.a09
                    > USED AT LINE 343 IN basic.a09
                    > USED AT LINE 345 IN basic.a09
                    > USED AT LINE 352 IN basic.a09
                    > USED AT LINE 903 IN basic.a09
                    > USED AT LINE 907 IN basic.a09
                    > USED AT LINE 911 IN basic.a09
ZONE:               001C DEFINED AT LINE 65 IN basic.a09
                    > USED AT LINE 225 IN basic.a09
                    > USED AT LINE 869 IN basic.a09
                    > USED AT LINE 1081 IN basic.a09
MODE:               001D DEFINED AT LINE 66 IN basic.a09
                    > USED AT LINE 92 IN basic.a09
                    > USED AT LINE 98 IN basic.a09
                    > USED AT LINE 280 IN basic.a09
                    > USED AT LINE 301 IN basic.a09
RESRVD:             001E DEFINED AT LINE 67 IN basic.a09
LOEND:              001F DEFINED AT LINE 68 IN basic.a09
BASIC:              E400 DEFINED AT LINE 76 IN basic.a09
WARMS:              E40D DEFINED AT LINE 78 IN basic.a09
SETUP:              E415 DEFINED AT LINE 81 IN basic.a09
                    > USED AT LINE 76 IN basic.a09
SET03:              E419 DEFINED AT LINE 82 IN basic.a09
CLEAR:              E41F DEFINED AT LINE 84 IN basic.a09
                    > USED AT LINE 1067 IN basic.a09
CLR02:              E426 DEFINED AT LINE 87 IN basic.a09
WMS05:              E428 DEFINED AT LINE 88 IN basic.a09
                    > USED AT LINE 80 IN basic.a09
CMDB:               E431 DEFINED AT LINE 91 IN basic.a09
                    > USED AT LINE 110 IN basic.a09
                    > USED AT LINE 255 IN basic.a09
CMDE:               E43D DEFINED AT LINE 96 IN basic.a09
                    > USED AT LINE 108 IN basic.a09
                    > USED AT LINE 124 IN basic.a09
CMD01:              E44B DEFINED AT LINE 102 IN basic.a09
                    > USED AT LINE 99 IN basic.a09
CMD02:              E461 DEFINED AT LINE 111 IN basic.a09
                    > USED AT LINE 104 IN basic.a09
CMD03:              E46E DEFINED AT LINE 117 IN basic.a09
                    > USED AT LINE 115 IN basic.a09
CMD04:              E473 DEFINED AT LINE 119 IN basic.a09
CMD05:              E480 DEFINED AT LINE 125 IN basic.a09
                    > USED AT LINE 105 IN basic.a09
                    > USED AT LINE 118 IN basic.a09
                    > USED AT LINE 122 IN basic.a09
VSTR:               E483 DEFINED AT LINE 126 IN basic.a09
EDITOR:             E48E DEFINED AT LINE 130 IN basic.a09
                    > USED AT LINE 123 IN basic.a09
ED00:               E4A2 DEFINED AT LINE 139 IN basic.a09
                    > USED AT LINE 136 IN basic.a09
ED01:               E4A4 DEFINED AT LINE 140 IN basic.a09
                    > USED AT LINE 138 IN basic.a09
ED02:               E4AF DEFINED AT LINE 145 IN basic.a09
                    > USED AT LINE 147 IN basic.a09
ED03:               E4B5 DEFINED AT LINE 148 IN basic.a09
                    > USED AT LINE 156 IN basic.a09
ED35:               E4C7 DEFINED AT LINE 157 IN basic.a09
                    > USED AT LINE 149 IN basic.a09
ED04:               E4CD DEFINED AT LINE 160 IN basic.a09
                    > USED AT LINE 142 IN basic.a09
ED05:               E4D1 DEFINED AT LINE 162 IN basic.a09
                    > USED AT LINE 165 IN basic.a09
ED55:               E4DE DEFINED AT LINE 170 IN basic.a09
                    > USED AT LINE 167 IN basic.a09
ED06:               E4E2 DEFINED AT LINE 172 IN basic.a09
                    > USED AT LINE 176 IN basic.a09
ED07:               E506 DEFINED AT LINE 190 IN basic.a09
                    > USED AT LINE 186 IN basic.a09
ED08:               E508 DEFINED AT LINE 191 IN basic.a09
                    > USED AT LINE 199 IN basic.a09
ED09:               E51A DEFINED AT LINE 200 IN basic.a09
                    > USED AT LINE 194 IN basic.a09
ED10:               E522 DEFINED AT LINE 204 IN basic.a09
                    > USED AT LINE 211 IN basic.a09
PUTS01:             E533 DEFINED AT LINE 215 IN basic.a09
                    > USED AT LINE 219 IN basic.a09
PUTSTR:             E538 DEFINED AT LINE 217 IN basic.a09
                    > USED AT LINE 90 IN basic.a09
                    > USED AT LINE 224 IN basic.a09
                    > USED AT LINE 253 IN basic.a09
                    > USED AT LINE 942 IN basic.a09
                    > USED AT LINE 1012 IN basic.a09
CRLF:               E53F DEFINED AT LINE 223 IN basic.a09
                    > USED AT LINE 88 IN basic.a09
                    > USED AT LINE 93 IN basic.a09
                    > USED AT LINE 245 IN basic.a09
                    > USED AT LINE 254 IN basic.a09
                    > USED AT LINE 258 IN basic.a09
                    > USED AT LINE 285 IN basic.a09
                    > USED AT LINE 863 IN basic.a09
                    > USED AT LINE 943 IN basic.a09
                    > USED AT LINE 1015 IN basic.a09
CRLFST:             E547 DEFINED AT LINE 227 IN basic.a09
ERRORF:             E54E DEFINED AT LINE 230 IN basic.a09
                    > USED AT LINE 189 IN basic.a09
                    > USED AT LINE 756 IN basic.a09
                    > USED AT LINE 823 IN basic.a09
ERRORS:             E556 DEFINED AT LINE 233 IN basic.a09
                    > USED AT LINE 125 IN basic.a09
                    > USED AT LINE 419 IN basic.a09
                    > USED AT LINE 539 IN basic.a09
                    > USED AT LINE 751 IN basic.a09
                    > USED AT LINE 777 IN basic.a09
                    > USED AT LINE 785 IN basic.a09
                    > USED AT LINE 790 IN basic.a09
                    > USED AT LINE 861 IN basic.a09
                    > USED AT LINE 883 IN basic.a09
                    > USED AT LINE 956 IN basic.a09
                    > USED AT LINE 994 IN basic.a09
ERRORR:             E55F DEFINED AT LINE 236 IN basic.a09
                    > USED AT LINE 116 IN basic.a09
                    > USED AT LINE 315 IN basic.a09
                    > USED AT LINE 820 IN basic.a09
BREAK:              E567 DEFINED AT LINE 239 IN basic.a09
                    > USED AT LINE 1079 IN basic.a09
ER01:               E574 DEFINED AT LINE 245 IN basic.a09
                    > USED AT LINE 230 IN basic.a09
                    > USED AT LINE 233 IN basic.a09
                    > USED AT LINE 236 IN basic.a09
                    > USED AT LINE 239 IN basic.a09
GL00:               E58E DEFINED AT LINE 258 IN basic.a09
                    > USED AT LINE 275 IN basic.a09
GETLIN:             E590 DEFINED AT LINE 259 IN basic.a09
                    > USED AT LINE 102 IN basic.a09
                    > USED AT LINE 935 IN basic.a09
GL03:               E593 DEFINED AT LINE 260 IN basic.a09
                    > USED AT LINE 264 IN basic.a09
                    > USED AT LINE 271 IN basic.a09
                    > USED AT LINE 279 IN basic.a09
                    > USED AT LINE 292 IN basic.a09
GL04:               E5A7 DEFINED AT LINE 269 IN basic.a09
                    > USED AT LINE 266 IN basic.a09
GL02:               E5A9 DEFINED AT LINE 270 IN basic.a09
                    > USED AT LINE 268 IN basic.a09
                    > USED AT LINE 299 IN basic.a09
                    > USED AT LINE 302 IN basic.a09
GL05:               E5AE DEFINED AT LINE 272 IN basic.a09
                    > USED AT LINE 262 IN basic.a09
GL06:               E5C7 DEFINED AT LINE 284 IN basic.a09
                    > USED AT LINE 281 IN basic.a09
GL08:               E5CE DEFINED AT LINE 287 IN basic.a09
                    > USED AT LINE 283 IN basic.a09
GL07:               E5D6 DEFINED AT LINE 291 IN basic.a09
                    > USED AT LINE 273 IN basic.a09
GL09:               E5EB DEFINED AT LINE 300 IN basic.a09
                    > USED AT LINE 277 IN basic.a09
REM00:              E5F1 DEFINED AT LINE 305 IN basic.a09
                    > USED AT LINE 308 IN basic.a09
REM:                E5F3 DEFINED AT LINE 306 IN basic.a09
                    > USED AT LINE 805 IN basic.a09
                    > USED AT LINE 1052 IN basic.a09
ENDSMT:             E5F9 DEFINED AT LINE 309 IN basic.a09
                    > USED AT LINE 952 IN basic.a09
ENDS02:             E5FC DEFINED AT LINE 310 IN basic.a09
                    > USED AT LINE 547 IN basic.a09
                    > USED AT LINE 798 IN basic.a09
                    > USED AT LINE 832 IN basic.a09
                    > USED AT LINE 876 IN basic.a09
                    > USED AT LINE 1023 IN basic.a09
REM05:              E602 DEFINED AT LINE 313 IN basic.a09
                    > USED AT LINE 975 IN basic.a09
NXTLIN:             E609 DEFINED AT LINE 316 IN basic.a09
                    > USED AT LINE 314 IN basic.a09
                    > USED AT LINE 812 IN basic.a09
                    > USED AT LINE 828 IN basic.a09
MSLINE:             E60D DEFINED AT LINE 318 IN basic.a09
                    > USED AT LINE 109 IN basic.a09
                    > USED AT LINE 804 IN basic.a09
REM09:              E616 DEFINED AT LINE 322 IN basic.a09
                    > USED AT LINE 312 IN basic.a09
IMPLET:             E617 DEFINED AT LINE 323 IN basic.a09
                    > USED AT LINE 320 IN basic.a09
IFAN:               E61A DEFINED AT LINE 326 IN basic.a09
                    > USED AT LINE 319 IN basic.a09
FAN00:              E621 DEFINED AT LINE 329 IN basic.a09
                    > USED AT LINE 357 IN basic.a09
                    > USED AT LINE 553 IN basic.a09
FAN04:              E62C DEFINED AT LINE 335 IN basic.a09
                    > USED AT LINE 331 IN basic.a09
FAN05:              E632 DEFINED AT LINE 338 IN basic.a09
                    > USED AT LINE 347 IN basic.a09
FAN07:              E64D DEFINED AT LINE 352 IN basic.a09
                    > USED AT LINE 340 IN basic.a09
FAN08:              E64F DEFINED AT LINE 353 IN basic.a09
                    > USED AT LINE 355 IN basic.a09
NXTNSP:             E659 DEFINED AT LINE 360 IN basic.a09
                    > USED AT LINE 363 IN basic.a09
SKIPSP:             E65B DEFINED AT LINE 361 IN basic.a09
                    > USED AT LINE 106 IN basic.a09
                    > USED AT LINE 131 IN basic.a09
                    > USED AT LINE 306 IN basic.a09
                    > USED AT LINE 326 IN basic.a09
                    > USED AT LINE 395 IN basic.a09
                    > USED AT LINE 413 IN basic.a09
                    > USED AT LINE 423 IN basic.a09
                    > USED AT LINE 436 IN basic.a09
                    > USED AT LINE 449 IN basic.a09
                    > USED AT LINE 536 IN basic.a09
                    > USED AT LINE 550 IN basic.a09
                    > USED AT LINE 598 IN basic.a09
                    > USED AT LINE 605 IN basic.a09
                    > USED AT LINE 615 IN basic.a09
                    > USED AT LINE 646 IN basic.a09
                    > USED AT LINE 655 IN basic.a09
                    > USED AT LINE 672 IN basic.a09
                    > USED AT LINE 745 IN basic.a09
                    > USED AT LINE 757 IN basic.a09
                    > USED AT LINE 774 IN basic.a09
                    > USED AT LINE 787 IN basic.a09
                    > USED AT LINE 838 IN basic.a09
                    > USED AT LINE 854 IN basic.a09
                    > USED AT LINE 872 IN basic.a09
                    > USED AT LINE 936 IN basic.a09
                    > USED AT LINE 949 IN basic.a09
                    > USED AT LINE 960 IN basic.a09
                    > USED AT LINE 986 IN basic.a09
TSTHEX:             E662 DEFINED AT LINE 367 IN basic.a09
                    > USED AT LINE 459 IN basic.a09
TSTLTR:             E673 DEFINED AT LINE 378 IN basic.a09
                    > USED AT LINE 396 IN basic.a09
                    > USED AT LINE 400 IN basic.a09
TST03:              E67B DEFINED AT LINE 382 IN basic.a09
                    > USED AT LINE 370 IN basic.a09
                    > USED AT LINE 372 IN basic.a09
                    > USED AT LINE 379 IN basic.a09
                    > USED AT LINE 387 IN basic.a09
                    > USED AT LINE 389 IN basic.a09
                    > USED AT LINE 401 IN basic.a09
TSTDIG:             E67E DEFINED AT LINE 386 IN basic.a09
                    > USED AT LINE 367 IN basic.a09
                    > USED AT LINE 450 IN basic.a09
                    > USED AT LINE 483 IN basic.a09
TST05:              E688 DEFINED AT LINE 391 IN basic.a09
                    > USED AT LINE 368 IN basic.a09
                    > USED AT LINE 381 IN basic.a09
TSTVAR:             E68B DEFINED AT LINE 395 IN basic.a09
                    > USED AT LINE 732 IN basic.a09
                    > USED AT LINE 783 IN basic.a09
                    > USED AT LINE 929 IN basic.a09
                    > USED AT LINE 954 IN basic.a09
TSTV02:             E6A1 DEFINED AT LINE 407 IN basic.a09
TSTV03:             E6A3 DEFINED AT LINE 408 IN basic.a09
                    > USED AT LINE 397 IN basic.a09
USER:               E6A4 DEFINED AT LINE 411 IN basic.a09
                    > USED AT LINE 561 IN basic.a09
USER02:             E6B6 DEFINED AT LINE 419 IN basic.a09
                    > USED AT LINE 426 IN basic.a09
USER03:             E6B9 DEFINED AT LINE 420 IN basic.a09
                    > USED AT LINE 415 IN basic.a09
USER05:             E6CB DEFINED AT LINE 428 IN basic.a09
                    > USED AT LINE 418 IN basic.a09
TSTSNB:             E6D6 DEFINED AT LINE 436 IN basic.a09
                    > USED AT LINE 939 IN basic.a09
TSN02:              E6E9 DEFINED AT LINE 446 IN basic.a09
                    > USED AT LINE 441 IN basic.a09
TSTNBR:             E6EA DEFINED AT LINE 449 IN basic.a09
                    > USED AT LINE 103 IN basic.a09
                    > USED AT LINE 438 IN basic.a09
                    > USED AT LINE 440 IN basic.a09
                    > USED AT LINE 739 IN basic.a09
                    > USED AT LINE 978 IN basic.a09
                    > USED AT LINE 992 IN basic.a09
TSTN20:             E6F8 DEFINED AT LINE 455 IN basic.a09
TSTN23:             E6FE DEFINED AT LINE 458 IN basic.a09
                    > USED AT LINE 478 IN basic.a09
TSTN02:             E721 DEFINED AT LINE 479 IN basic.a09
                    > USED AT LINE 451 IN basic.a09
TSTN03:             E727 DEFINED AT LINE 482 IN basic.a09
                    > USED AT LINE 506 IN basic.a09
TSTN07:             E754 DEFINED AT LINE 507 IN basic.a09
                    > USED AT LINE 460 IN basic.a09
                    > USED AT LINE 484 IN basic.a09
TSTN09:             E758 DEFINED AT LINE 509 IN basic.a09
                    > USED AT LINE 454 IN basic.a09
TSTN11:             E75B DEFINED AT LINE 511 IN basic.a09
                    > USED AT LINE 466 IN basic.a09
                    > USED AT LINE 491 IN basic.a09
                    > USED AT LINE 494 IN basic.a09
                    > USED AT LINE 496 IN basic.a09
                    > USED AT LINE 499 IN basic.a09
                    > USED AT LINE 502 IN basic.a09
TSTSTK:             E762 DEFINED AT LINE 517 IN basic.a09
                    > USED AT LINE 185 IN basic.a09
                    > USED AT LINE 567 IN basic.a09
                    > USED AT LINE 754 IN basic.a09
                    > USED AT LINE 821 IN basic.a09
PEEK:               E76D DEFINED AT LINE 524 IN basic.a09
                    > USED AT LINE 564 IN basic.a09
POKE:               E77C DEFINED AT LINE 534 IN basic.a09
                    > USED AT LINE 1043 IN basic.a09
POKE05:             E78B DEFINED AT LINE 540 IN basic.a09
                    > USED AT LINE 538 IN basic.a09
TSTFUN:             E79E DEFINED AT LINE 550 IN basic.a09
                    > USED AT LINE 741 IN basic.a09
TSTF05:             E7AD DEFINED AT LINE 556 IN basic.a09
                    > USED AT LINE 554 IN basic.a09
FUNT:               E7AE DEFINED AT LINE 559 IN basic.a09
FLINE:              E7C2 DEFINED AT LINE 571 IN basic.a09
                    > USED AT LINE 810 IN basic.a09
                    > USED AT LINE 818 IN basic.a09
                    > USED AT LINE 999 IN basic.a09
FNDLIN:             E7C4 DEFINED AT LINE 572 IN basic.a09
                    > USED AT LINE 140 IN basic.a09
                    > USED AT LINE 592 IN basic.a09
FND03:              E7CB DEFINED AT LINE 576 IN basic.a09
                    > USED AT LINE 573 IN basic.a09
FND05:              E7D3 DEFINED AT LINE 580 IN basic.a09
                    > USED AT LINE 577 IN basic.a09
FND07:              E7DA DEFINED AT LINE 584 IN basic.a09
                    > USED AT LINE 580 IN basic.a09
FND09:              E7E0 DEFINED AT LINE 587 IN basic.a09
                    > USED AT LINE 589 IN basic.a09
RELEXP:             E7EC DEFINED AT LINE 595 IN basic.a09
                    > USED AT LINE 801 IN basic.a09
REL03:              E80C DEFINED AT LINE 611 IN basic.a09
                    > USED AT LINE 602 IN basic.a09
REL05:              E817 DEFINED AT LINE 616 IN basic.a09
                    > USED AT LINE 607 IN basic.a09
REL06:              E81B DEFINED AT LINE 618 IN basic.a09
                    > USED AT LINE 600 IN basic.a09
REL07:              E81F DEFINED AT LINE 620 IN basic.a09
                    > USED AT LINE 610 IN basic.a09
                    > USED AT LINE 617 IN basic.a09
REL08:              E837 DEFINED AT LINE 634 IN basic.a09
                    > USED AT LINE 632 IN basic.a09
REL09:              E83D DEFINED AT LINE 638 IN basic.a09
                    > USED AT LINE 636 IN basic.a09
EXPR:               E843 DEFINED AT LINE 644 IN basic.a09
                    > USED AT LINE 421 IN basic.a09
                    > USED AT LINE 541 IN basic.a09
                    > USED AT LINE 595 IN basic.a09
                    > USED AT LINE 621 IN basic.a09
                    > USED AT LINE 761 IN basic.a09
                    > USED AT LINE 792 IN basic.a09
                    > USED AT LINE 808 IN basic.a09
                    > USED AT LINE 815 IN basic.a09
                    > USED AT LINE 850 IN basic.a09
EXPR02:             E852 DEFINED AT LINE 651 IN basic.a09
                    > USED AT LINE 657 IN basic.a09
EXPR03:             E854 DEFINED AT LINE 652 IN basic.a09
                    > USED AT LINE 650 IN basic.a09
EXPR04:             E856 DEFINED AT LINE 653 IN basic.a09
                    > USED AT LINE 665 IN basic.a09
EXPR05:             E865 DEFINED AT LINE 660 IN basic.a09
                    > USED AT LINE 648 IN basic.a09
EXPR06:             E86F DEFINED AT LINE 666 IN basic.a09
                    > USED AT LINE 612 IN basic.a09
                    > USED AT LINE 659 IN basic.a09
TERM:               E872 DEFINED AT LINE 670 IN basic.a09
                    > USED AT LINE 652 IN basic.a09
                    > USED AT LINE 661 IN basic.a09
TERM03:             E877 DEFINED AT LINE 672 IN basic.a09
                    > USED AT LINE 712 IN basic.a09
                    > USED AT LINE 729 IN basic.a09
TERM05:             E885 DEFINED AT LINE 679 IN basic.a09
                    > USED AT LINE 676 IN basic.a09
DIV05:              E8A1 DEFINED AT LINE 693 IN basic.a09
                    > USED AT LINE 704 IN basic.a09
DIV07:              E8AB DEFINED AT LINE 698 IN basic.a09
                    > USED AT LINE 694 IN basic.a09
DIV09:              E8AD DEFINED AT LINE 699 IN basic.a09
                    > USED AT LINE 697 IN basic.a09
TERM06:             E8C2 DEFINED AT LINE 711 IN basic.a09
                    > USED AT LINE 708 IN basic.a09
TERM07:             E8C6 DEFINED AT LINE 713 IN basic.a09
                    > USED AT LINE 674 IN basic.a09
MULT:               E8CA DEFINED AT LINE 715 IN basic.a09
FACT:               E8E5 DEFINED AT LINE 732 IN basic.a09
                    > USED AT LINE 670 IN basic.a09
                    > USED AT LINE 680 IN basic.a09
                    > USED AT LINE 714 IN basic.a09
FACT02:             E8F2 DEFINED AT LINE 738 IN basic.a09
                    > USED AT LINE 740 IN basic.a09
                    > USED AT LINE 742 IN basic.a09
FACT03:             E8F3 DEFINED AT LINE 739 IN basic.a09
                    > USED AT LINE 733 IN basic.a09
PAREXP:             E8FD DEFINED AT LINE 743 IN basic.a09
                    > USED AT LINE 524 IN basic.a09
                    > USED AT LINE 534 IN basic.a09
FACT05:             E90D DEFINED AT LINE 751 IN basic.a09
                    > USED AT LINE 748 IN basic.a09
                    > USED AT LINE 759 IN basic.a09
ARGONE:             E910 DEFINED AT LINE 754 IN basic.a09
                    > USED AT LINE 411 IN basic.a09
                    > USED AT LINE 743 IN basic.a09
FACT04:             E918 DEFINED AT LINE 757 IN basic.a09
                    > USED AT LINE 755 IN basic.a09
ABSX:               E924 DEFINED AT LINE 764 IN basic.a09
                    > USED AT LINE 685 IN basic.a09
                    > USED AT LINE 687 IN basic.a09
NEGX:               E928 DEFINED AT LINE 766 IN basic.a09
                    > USED AT LINE 710 IN basic.a09
NEG05:              E930 DEFINED AT LINE 770 IN basic.a09
                    > USED AT LINE 765 IN basic.a09
                    > USED AT LINE 768 IN basic.a09
TSTEOL:             E931 DEFINED AT LINE 773 IN basic.a09
                    > USED AT LINE 309 IN basic.a09
                    > USED AT LINE 542 IN basic.a09
                    > USED AT LINE 793 IN basic.a09
                    > USED AT LINE 809 IN basic.a09
                    > USED AT LINE 816 IN basic.a09
                    > USED AT LINE 835 IN basic.a09
                    > USED AT LINE 995 IN basic.a09
TEOL03:             E93D DEFINED AT LINE 778 IN basic.a09
                    > USED AT LINE 776 IN basic.a09
LET:                E942 DEFINED AT LINE 783 IN basic.a09
                    > USED AT LINE 323 IN basic.a09
                    > USED AT LINE 1028 IN basic.a09
LET03:              E94A DEFINED AT LINE 786 IN basic.a09
                    > USED AT LINE 784 IN basic.a09
LET05:              E956 DEFINED AT LINE 791 IN basic.a09
                    > USED AT LINE 789 IN basic.a09
IF:                 E968 DEFINED AT LINE 801 IN basic.a09
                    > USED AT LINE 1031 IN basic.a09
IF03:               E971 DEFINED AT LINE 805 IN basic.a09
                    > USED AT LINE 803 IN basic.a09
GOTO:               E974 DEFINED AT LINE 808 IN basic.a09
                    > USED AT LINE 1034 IN basic.a09
GOSUB:              E981 DEFINED AT LINE 815 IN basic.a09
                    > USED AT LINE 1037 IN basic.a09
GOSB04:             E98D DEFINED AT LINE 820 IN basic.a09
                    > USED AT LINE 811 IN basic.a09
GOSB03:             E990 DEFINED AT LINE 821 IN basic.a09
                    > USED AT LINE 819 IN basic.a09
GOSB05:             E998 DEFINED AT LINE 824 IN basic.a09
                    > USED AT LINE 822 IN basic.a09
RETURN:             E931 DEFINED AT LINE 835 IN basic.a09
                    > USED AT LINE 1040 IN basic.a09
PRINT:              E9AC DEFINED AT LINE 838 IN basic.a09
                    > USED AT LINE 1046 IN basic.a09
                    > USED AT LINE 1070 IN basic.a09
PR01:               E9AF DEFINED AT LINE 839 IN basic.a09
                    > USED AT LINE 874 IN basic.a09
PR02:               E9C5 DEFINED AT LINE 850 IN basic.a09
                    > USED AT LINE 846 IN basic.a09
PR03:               E9CE DEFINED AT LINE 854 IN basic.a09
                    > USED AT LINE 849 IN basic.a09
PR04:               E9E0 DEFINED AT LINE 862 IN basic.a09
                    > USED AT LINE 844 IN basic.a09
                    > USED AT LINE 860 IN basic.a09
PR05:               E9E9 DEFINED AT LINE 866 IN basic.a09
                    > USED AT LINE 840 IN basic.a09
                    > USED AT LINE 856 IN basic.a09
PR06:               E9EB DEFINED AT LINE 867 IN basic.a09
                    > USED AT LINE 870 IN basic.a09
PR07:               E9F4 DEFINED AT LINE 871 IN basic.a09
                    > USED AT LINE 842 IN basic.a09
                    > USED AT LINE 858 IN basic.a09
PR08:               E9FD DEFINED AT LINE 875 IN basic.a09
                    > USED AT LINE 865 IN basic.a09
PRQ01:              EA02 DEFINED AT LINE 879 IN basic.a09
                    > USED AT LINE 885 IN basic.a09
PRNTQS:             EA05 DEFINED AT LINE 880 IN basic.a09
                    > USED AT LINE 848 IN basic.a09
PRQ03:              EA0E DEFINED AT LINE 884 IN basic.a09
                    > USED AT LINE 882 IN basic.a09
PRNTN:              EA13 DEFINED AT LINE 888 IN basic.a09
                    > USED AT LINE 852 IN basic.a09
PRN03:              EA23 DEFINED AT LINE 897 IN basic.a09
                    > USED AT LINE 889 IN basic.a09
PRN05:              EA26 DEFINED AT LINE 898 IN basic.a09
                    > USED AT LINE 902 IN basic.a09
PRN07:              EA32 DEFINED AT LINE 903 IN basic.a09
                    > USED AT LINE 900 IN basic.a09
                    > USED AT LINE 917 IN basic.a09
                    > USED AT LINE 926 IN basic.a09
PRN09:              EA34 DEFINED AT LINE 904 IN basic.a09
                    > USED AT LINE 908 IN basic.a09
PRN11:              EA3F DEFINED AT LINE 909 IN basic.a09
                    > USED AT LINE 905 IN basic.a09
PRN13:              EA53 DEFINED AT LINE 918 IN basic.a09
                    > USED AT LINE 915 IN basic.a09
PRNPT:              EA54 DEFINED AT LINE 919 IN basic.a09
PRNPTO:             EA5C DEFINED AT LINE 923 IN basic.a09
PRNT4:              EA5E DEFINED AT LINE 925 IN basic.a09
                    > USED AT LINE 249 IN basic.a09
                    > USED AT LINE 1008 IN basic.a09
INPUT:              EA63 DEFINED AT LINE 929 IN basic.a09
                    > USED AT LINE 1049 IN basic.a09
IN03:               EA6C DEFINED AT LINE 933 IN basic.a09
                    > USED AT LINE 938 IN basic.a09
                    > USED AT LINE 944 IN basic.a09
IN05:               EA74 DEFINED AT LINE 936 IN basic.a09
                    > USED AT LINE 962 IN basic.a09
                    > USED AT LINE 964 IN basic.a09
IN07:               EA8B DEFINED AT LINE 945 IN basic.a09
                    > USED AT LINE 940 IN basic.a09
IN09:               EA9D DEFINED AT LINE 953 IN basic.a09
                    > USED AT LINE 951 IN basic.a09
IN11:               EAA4 DEFINED AT LINE 956 IN basic.a09
                    > USED AT LINE 930 IN basic.a09
IN13:               EAA7 DEFINED AT LINE 957 IN basic.a09
                    > USED AT LINE 955 IN basic.a09
RMESS:              EAB8 DEFINED AT LINE 965 IN basic.a09
RUN:                EAC1 DEFINED AT LINE 969 IN basic.a09
                    > USED AT LINE 1061 IN basic.a09
RUN01:              EAC5 DEFINED AT LINE 971 IN basic.a09
                    > USED AT LINE 973 IN basic.a09
LIST:               EACF DEFINED AT LINE 978 IN basic.a09
                    > USED AT LINE 1064 IN basic.a09
LIST03:             EADC DEFINED AT LINE 985 IN basic.a09
                    > USED AT LINE 979 IN basic.a09
LIST05:             EAE9 DEFINED AT LINE 991 IN basic.a09
                    > USED AT LINE 988 IN basic.a09
LIST07:             EAF3 DEFINED AT LINE 995 IN basic.a09
                    > USED AT LINE 984 IN basic.a09
                    > USED AT LINE 990 IN basic.a09
                    > USED AT LINE 993 IN basic.a09
LIST09:             EAFF DEFINED AT LINE 1000 IN basic.a09
                    > USED AT LINE 1018 IN basic.a09
LIST10:             EB2B DEFINED AT LINE 1019 IN basic.a09
                    > USED AT LINE 1001 IN basic.a09
LIST11:             EB32 DEFINED AT LINE 1022 IN basic.a09
                    > USED AT LINE 1004 IN basic.a09
VERBT:              EB37 DEFINED AT LINE 1026 IN basic.a09
TSTBRK:             EB9C DEFINED AT LINE 1074 IN basic.a09
                    > USED AT LINE 318 IN basic.a09
                    > USED AT LINE 1017 IN basic.a09
GETCHR:             EBA0 DEFINED AT LINE 1076 IN basic.a09
                    > USED AT LINE 260 IN basic.a09
GETC05:             EBA9 DEFINED AT LINE 1080 IN basic.a09
                    > USED AT LINE 1075 IN basic.a09
                    > USED AT LINE 1078 IN basic.a09
PUTCHR:             EBAA DEFINED AT LINE 1081 IN basic.a09
                    > USED AT LINE 101 IN basic.a09
                    > USED AT LINE 215 IN basic.a09
                    > USED AT LINE 247 IN basic.a09
                    > USED AT LINE 251 IN basic.a09
                    > USED AT LINE 270 IN basic.a09
                    > USED AT LINE 282 IN basic.a09
                    > USED AT LINE 295 IN basic.a09
                    > USED AT LINE 297 IN basic.a09
                    > USED AT LINE 868 IN basic.a09
                    > USED AT LINE 879 IN basic.a09
                    > USED AT LINE 895 IN basic.a09
                    > USED AT LINE 912 IN basic.a09
                    > USED AT LINE 934 IN basic.a09
                    > USED AT LINE 1011 IN basic.a09
                    > USED AT LINE 1021 IN basic.a09
INEEE:              EBAF DEFINED AT LINE 1085 IN basic.a09
                    > USED AT LINE 1076 IN basic.a09
                    > USED AT LINE 1086 IN basic.a09
OUTEEE:             EBB9 DEFINED AT LINE 1090 IN basic.a09
                    > USED AT LINE 1082 IN basic.a09
OUT01:              EBBB DEFINED AT LINE 1091 IN basic.a09
                    > USED AT LINE 1093 IN basic.a09
BRKEEE:             EBC8 DEFINED AT LINE 1097 IN basic.a09
                    > USED AT LINE 1074 IN basic.a09
                    > USED AT LINE 1085 IN basic.a09
BRK03:              EBCA DEFINED AT LINE 1098 IN basic.a09
                    > USED AT LINE 1102 IN basic.a09
BRK05:              EBD6 DEFINED AT LINE 1103 IN basic.a09
                    > USED AT LINE 1100 IN basic.a09
INTEEE:             EBE5 DEFINED AT LINE 1111 IN basic.a09
                    > USED AT LINE 79 IN basic.a09
                    > USED AT LINE 83 IN basic.a09
END:                EBE6 DEFINED AT LINE 1118 IN basic.a09
                    > USED AT LINE 1055 IN basic.a09
                    > USED AT LINE 1058 IN basic.a09
FLIPFLOP:           EC10 DEFINED AT LINE 19 IN flipflop.a09
                    > USED AT LINE 5 IN flipflop.a09
FLIP:               EC22 DEFINED AT LINE 28 IN flipflop.a09
                    > USED AT LINE 25 IN flipflop.a09
                    > USED AT LINE 40 IN flipflop.a09
FLOP:               EC30 DEFINED AT LINE 35 IN flipflop.a09
                    > USED AT LINE 33 IN flipflop.a09
QTRSCD:             EC3E DEFINED AT LINE 42 IN flipflop.a09
                    > USED AT LINE 32 IN flipflop.a09
                    > USED AT LINE 39 IN flipflop.a09
                    > USED AT LINE 45 IN flipflop.a09
CPMS:               07D0 DEFINED AT LINE 3 IN flipflop.a09
                    > USED AT LINE 6 IN flipflop.a09
MFAC:               0064 DEFINED AT LINE 6 IN flipflop.a09
                    > USED AT LINE 9 IN flipflop.a09
MFACM:              0060 DEFINED AT LINE 9 IN flipflop.a09
DELAY:              EC47 DEFINED AT LINE 12 IN flipflop.a09
                    > USED AT LINE 43 IN flipflop.a09
DLY:                EC5E DEFINED AT LINE 36 IN flipflop.a09
                    > USED AT LINE 21 IN flipflop.a09
                    > USED AT LINE 26 IN flipflop.a09
                    > USED AT LINE 41 IN flipflop.a09
DLY1:               EC60 DEFINED AT LINE 37 IN flipflop.a09
                    > USED AT LINE 36 IN flipflop.a09
DLY2:               EC62 DEFINED AT LINE 38 IN flipflop.a09
                    > USED AT LINE 37 IN flipflop.a09
DLY3:               EC64 DEFINED AT LINE 39 IN flipflop.a09
                    > USED AT LINE 38 IN flipflop.a09
DLY4:               EC66 DEFINED AT LINE 40 IN flipflop.a09
                    > USED AT LINE 39 IN flipflop.a09
TESTMOD:            ED0F DEFINED AT LINE 19 IN testmod.a09
                    > USED AT LINE 5 IN testmod.a09
